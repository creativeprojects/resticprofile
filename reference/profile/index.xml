<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Section Profile :: resticprofile</title><link>https://creativeprojects.github.io/resticprofile/reference/profile/index.html</link><description>Profile sections In config file format v1, the name of this section is the name of your profile (excluding reserved names like global, groups, includes &amp; version).
From config file format v2, profile sections are declared as named configuration structure below section profiles (see Configuration v2 for details).
Section profile Flags used by resticprofile only: Name Type Default Notes base-dir string Sets the working directory for this profile. The profile will fail when the working directory cannot be changed. Leave empty to use the current directory instead description string Describes the profile env key => value Additional environment variables to set in any child process. Inline env variables take precedence over dotenv files declared with “env-file” env-file one or more strings Additional dotenv files to load and set as environment in any child process force-inactive-lock true / false false Allows to lock when the existing lock is considered stale inherit string Name of the profile to inherit all of the settings from initialize true / false Initialize the restic repository if missing lock string Path to the lock file to use with resticprofile locks prometheus-labels key => string Additional prometheus labels to set prometheus-push uri URL of the prometheus push gateway to send the summary of the last restic command result to prometheus-push-format string text Prometheus push gateway request format. Is one of text, protobuf prometheus-push-job string Prometheus push gateway job name. $command placeholder is replaced with restic command prometheus-save-to-file string Path to the prometheus metrics file to update with a summary of the last restic command result run-after one or more strings Run shell command(s) after a successful restic command run-after-fail one or more strings Run shell command(s) after failed restic or shell commands run-before one or more strings Run shell command(s) before a restic command run-finally one or more strings Run shell command(s) always, after all other commands status-file string Path to the status file to update with a summary of last restic command result stream-error one or more nested StreamErrorSection Run shell command(s) when a pattern matches the stderr of restic systemd-drop-in-files one or more strings Files containing systemd drop-in (override) files - see schedules/systemd/ Flags passed to the restic command line: Name Type Default Notes cacert string file to load root certificates from (default: use system certificates or $RESTIC_CACERT) cache-dir string "" set the cache directory. (default: use system default cache directory) cleanup-cache true / false false auto remove old cache directories compression string auto compression mode (only available for repository format version 2), one of (auto/off/max) (default: $RESTIC_COMPRESSION). restic >= 0.14.0 extended-status true / false false set output mode to JSON for commands that support it http-user-agent string "" set a http user agent for outgoing http requests. restic >= 0.17.0 insecure-no-password true / false false use an empty password for the repository, must be passed to every restic command (insecure). restic >= 0.17.0 insecure-tls true / false false skip TLS certificate verification when connecting to the repository (insecure). restic >= 0.13.0 key-hint string "" key ID of key to try decrypting first (default: $RESTIC_KEY_HINT) limit-download integer 0 limits downloads to a maximum rate in KiB/s. (default: unlimited) limit-upload integer 0 limits uploads to a maximum rate in KiB/s. (default: unlimited) no-cache true / false false do not use a local cache no-extra-verify true / false false skip additional verification of data before upload (see documentation). restic >= 0.16.4 no-lock true / false false do not lock the repository, this allows some operations on read-only repositories option one or more strings set extended option (key=value) pack-size integer 0 set target pack size in MiB, created pack files may be larger (default: $RESTIC_PACK_SIZE). restic >= 0.14.0 password-command string "" shell command to obtain the repository password from (default: $RESTIC_PASSWORD_COMMAND) password-file string "" file to read the repository password from (default: $RESTIC_PASSWORD_FILE) quiet true / false false do not output comprehensive progress report repository string "" repository to backup to or restore from (default: $RESTIC_REPOSITORY) repository-file string "" file to read the repository location from (default: $RESTIC_REPOSITORY_FILE). restic >= 0.11.0 retry-lock string 0s retry to lock the repository if it is already locked, takes a value like 5m or 2h (default: no retries). restic >= 0.16.0 tls-client-cert string "" path to a file containing PEM encoded TLS client certificate and private key (default: $RESTIC_TLS_CLIENT_CERT) verbose true / false OR integer 0 be verbose (true for level 1 or a number for increased verbosity, max level is 2) Note Most restic command flags defined in profile sections below can also be set at profile level. They will be inherited in all sections that define these flags and ignored in all others.</description><generator>Hugo</generator><language>en-gb</language><lastBuildDate>Wed, 02 Oct 2024 20:38:53 +0000</lastBuildDate><atom:link href="https://creativeprojects.github.io/resticprofile/reference/profile/index.xml" rel="self" type="application/rss+xml"/><item><title>backup</title><link>https://creativeprojects.github.io/resticprofile/reference/profile/backup/index.html</link><pubDate>Wed, 02 Oct 2024 20:38:53 +0000</pubDate><guid>https://creativeprojects.github.io/resticprofile/reference/profile/backup/index.html</guid><description>Section profile.backup This section configures restic command backup . Information on command and flags is copied from the restic manual pages.
The “backup” command creates a new snapshot and saves the files and directories given as the arguments.
Flags used by resticprofile only: Name Type Default Notes check-after true / false false Check the repository after the backup command succeeded check-before true / false false Check the repository before starting the backup command no-error-on-warning true / false false Do not fail the backup when some files could not be read run-after one or more strings Run shell command(s) after a successful restic command run-after-fail one or more strings Run shell command(s) after failed restic or shell commands run-before one or more strings Run shell command(s) before a restic command run-finally one or more strings Run shell command(s) always, after all other commands schedule one or more strings OR nested ScheduleConfig Configures the scheduled execution of this profile section. Can be times in systemd timer format or a config structure. Examples: hourly, daily, weekly, monthly, 10:00,14:00,18:00,22:00, Wed,Fri 17:48, *-*-15 02:45, Mon..Fri 00:30 schedule-after-network-online true / false Don’t start this schedule when the network is offline (supported in “systemd”) schedule-capture-environment one or more strings RESTIC_* Set names (or glob expressions) of environment variables to capture during schedule creation. The captured environment is applied prior to “profile.env” when running the schedule. Whether capturing is supported depends on the type of scheduler being used (supported in “systemd” and “launchd”) schedule-ignore-on-battery true / false false Don’t start this schedule when running on battery schedule-ignore-on-battery-less-than integer Don’t start this schedule when running on battery and the state of charge is less than this percentage. Examples: 20, 33, 50, 75 schedule-lock-mode string default Specify how locks are used when running on schedule - see schedules/configuration/. Is one of default, fail, ignore schedule-lock-wait integer OR duration Set the maximum time to wait for acquiring locks when running on schedule. Examples: 150s, 15m, 30m, 45m, 1h, 2h30m schedule-log string Redirect the output into a log file or to syslog when running on schedule. Examples: /resticprofile.log, syslog-tcp://syslog-server:514, syslog:server, syslog: schedule-permission string auto Specify whether the schedule runs with system or user privileges - see schedules/configuration/. Is one of auto, system, user, user_logged_on schedule-priority string background Set the priority at which the schedule is run. Is one of background, standard send-after one or more nested SendMonitoringSection Send HTTP request(s) after a successful restic command send-after-fail one or more nested SendMonitoringSection Send HTTP request(s) after failed restic or shell commands send-before one or more nested SendMonitoringSection Send HTTP request(s) before a restic command send-finally one or more nested SendMonitoringSection Send HTTP request(s) always, after all other commands source one or more strings The paths to backup. Examples: /opt/, /home/user/, C:\Users\User\Documents source-base string The base path to resolve relative backup paths against. Defaults to current directory if unset or empty (see also “base-dir” in profile). Examples: /, $PWD, C:\, %cd% source-relative true / false false Enable backup with relative source paths. This will change the working directory of the “restic backup” command to “source-base”, and will not expand “source” to an absolute path stdin-command one or more strings Shell command(s) that generate content to redirect into the stdin of restic. When set, the flag “stdin” is always set to “true” Flags passed to the restic command line: Name Type Default Notes dry-run true / false false do not upload or write any data, just show what would be done. restic >= 0.13.0 exclude one or more strings exclude a pattern exclude-caches true / false false excludes cache directories that are marked with a CACHEDIR.TAG file. See https://bford.info/cachedir/ for the Cache Directory Tagging Standard exclude-file one or more strings read exclude patterns from a file exclude-if-present one or more strings takes filename[:header], exclude contents of directories containing filename (except filename itself) if header of that file is as provided exclude-larger-than string "" max size of the files to be backed up (allowed suffixes: k/K, m/M, g/G, t/T). restic >= 0.10.0 extended-status true / false false set output mode to JSON for commands that support it files-from one or more strings read the files to backup from file (can be combined with file args) files-from-raw one or more strings read the files to backup from file (can be combined with file args). restic >= 0.12.0 files-from-verbatim one or more strings read the files to backup from file (can be combined with file args). restic >= 0.12.0 force true / false false force re-reading the source files/directories (overrides the “parent” flag) group-by string host,paths group snapshots by host, paths and/or tags, separated by comma (disable grouping with ‘’). restic >= 0.16.0 host true / false OR hostname "" set the hostname for the snapshot manually (default: $RESTIC_HOST). To prevent an expensive rescan use the “parent” flag. Boolean true is replaced with the hostname of the system. Defaults to true for config version 2 in “backup”. Examples: true, false, "host" iexclude one or more strings same as –exclude pattern but ignores the casing of filenames. restic >= 0.10.0 iexclude-file one or more strings same as –exclude-file but ignores casing of filenames in patterns. restic >= 0.10.0 ignore-ctime true / false false ignore ctime changes when checking for modified files. restic >= 0.12.0 ignore-inode true / false false ignore inode number and ctime changes when checking for modified files. restic >= 0.10.0 no-scan true / false false do not run scanner to estimate size of backup. restic >= 0.15.0 one-file-system true / false false exclude other file systems, don’t cross filesystem boundaries and subvolumes parent string "" use this parent snapshot (default: latest snapshot in the group determined by –group-by and not newer than the timestamp determined by –time) read-concurrency integer 0 read n files concurrently (default: $RESTIC_READ_CONCURRENCY or 2). restic >= 0.15.0 skip-if-unchanged true / false false skip snapshot creation if identical to parent snapshot. restic >= 0.17.0 stdin true / false false read backup from stdin stdin-filename string "stdin" filename to use when reading from stdin stdin-from-command true / false false interpret arguments as command to execute and store its stdout. restic >= 0.17.0 tag true / false OR one or more strings add tags for the new snapshot in the format tag[,tag,…]. Boolean true is unsupported in section “backup”. Examples: false, "tag" time string "" time of the backup (ex. ‘2012-11-01 22:08:41’) (default: now) use-fs-snapshot true / false false use filesystem snapshot where possible (currently only Windows VSS). restic >= 0.12.0 . Available only for windows with-atime true / false false store the atime for all files and directories Flags declared for the restic command line in section profile can be overridden in this section.</description></item><item><title>cache</title><link>https://creativeprojects.github.io/resticprofile/reference/profile/cache/index.html</link><pubDate>Wed, 02 Oct 2024 20:38:53 +0000</pubDate><guid>https://creativeprojects.github.io/resticprofile/reference/profile/cache/index.html</guid><description>Section profile.cache This section configures restic command cache . Information on command and flags is copied from the restic manual pages.
The “cache” command allows listing and cleaning local cache directories.
Flags used by resticprofile only: Name Type Default Notes run-after one or more strings Run shell command(s) after a successful restic command run-after-fail one or more strings Run shell command(s) after failed restic or shell commands run-before one or more strings Run shell command(s) before a restic command run-finally one or more strings Run shell command(s) always, after all other commands Flags passed to the restic command line: Name Type Default Notes cleanup true / false false remove old cache directories max-age integer 30 max age in days for cache directories to be considered old no-size true / false false do not output the size of the cache directories Flags declared for the restic command line in section profile can be overridden in this section.</description></item><item><title>cat</title><link>https://creativeprojects.github.io/resticprofile/reference/profile/cat/index.html</link><pubDate>Wed, 02 Oct 2024 20:38:53 +0000</pubDate><guid>https://creativeprojects.github.io/resticprofile/reference/profile/cat/index.html</guid><description>Section profile.cat This section configures restic command cat . Information on command and flags is copied from the restic manual pages.
The “cat” command is used to print internal objects to stdout.
Flags used by resticprofile only: Name Type Default Notes run-after one or more strings Run shell command(s) after a successful restic command run-after-fail one or more strings Run shell command(s) after failed restic or shell commands run-before one or more strings Run shell command(s) before a restic command run-finally one or more strings Run shell command(s) always, after all other commands Flags declared for the restic command line in section profile can be overridden in this section.</description></item><item><title>check</title><link>https://creativeprojects.github.io/resticprofile/reference/profile/check/index.html</link><pubDate>Wed, 02 Oct 2024 20:38:53 +0000</pubDate><guid>https://creativeprojects.github.io/resticprofile/reference/profile/check/index.html</guid><description>Section profile.check This section configures restic command check . Information on command and flags is copied from the restic manual pages.
The “check” command tests the repository for errors and reports any errors it finds. It can also be used to read all data and therefore simulate a restore.
By default, the “check” command will always load all data directly from the repository and not use a local cache.
Flags used by resticprofile only: Name Type Default Notes schedule one or more strings OR nested ScheduleConfig Configures the scheduled execution of this profile section. Can be times in systemd timer format or a config structure. Examples: hourly, daily, weekly, monthly, 10:00,14:00,18:00,22:00, Wed,Fri 17:48, *-*-15 02:45, Mon..Fri 00:30 schedule-after-network-online true / false Don’t start this schedule when the network is offline (supported in “systemd”) schedule-capture-environment one or more strings RESTIC_* Set names (or glob expressions) of environment variables to capture during schedule creation. The captured environment is applied prior to “profile.env” when running the schedule. Whether capturing is supported depends on the type of scheduler being used (supported in “systemd” and “launchd”) schedule-ignore-on-battery true / false false Don’t start this schedule when running on battery schedule-ignore-on-battery-less-than integer Don’t start this schedule when running on battery and the state of charge is less than this percentage. Examples: 20, 33, 50, 75 schedule-lock-mode string default Specify how locks are used when running on schedule - see schedules/configuration/. Is one of default, fail, ignore schedule-lock-wait integer OR duration Set the maximum time to wait for acquiring locks when running on schedule. Examples: 150s, 15m, 30m, 45m, 1h, 2h30m schedule-log string Redirect the output into a log file or to syslog when running on schedule. Examples: /resticprofile.log, syslog-tcp://syslog-server:514, syslog:server, syslog: schedule-permission string auto Specify whether the schedule runs with system or user privileges - see schedules/configuration/. Is one of auto, system, user, user_logged_on schedule-priority string background Set the priority at which the schedule is run. Is one of background, standard send-after one or more nested SendMonitoringSection Send HTTP request(s) after a successful restic command send-after-fail one or more nested SendMonitoringSection Send HTTP request(s) after failed restic or shell commands send-before one or more nested SendMonitoringSection Send HTTP request(s) before a restic command send-finally one or more nested SendMonitoringSection Send HTTP request(s) always, after all other commands Flags passed to the restic command line: Name Type Default Notes check-unused true / false false find unused blobs. restic &lt; 0.14.0 read-data true / false false read all data blobs read-data-subset string "" read a subset of data packs, specified as ’n/t’ for specific part, or either ‘x%’ or ‘x.y%’ or a size in bytes with suffixes k/K, m/M, g/G, t/T for a random subset with-cache true / false false use existing cache, only read uncached data from repository Flags declared for the restic command line in section profile can be overridden in this section.</description></item><item><title>copy</title><link>https://creativeprojects.github.io/resticprofile/reference/profile/copy/index.html</link><pubDate>Wed, 02 Oct 2024 20:38:53 +0000</pubDate><guid>https://creativeprojects.github.io/resticprofile/reference/profile/copy/index.html</guid><description>Section profile.copy This section configures restic command copy available since 0.10.0 . Information on command and flags is copied from the restic manual pages.
The “copy” command copies one or more snapshots from one repository to another.
NOTE: This process will have to both download (read) and upload (write) the entire snapshot(s) due to the different encryption keys used in the source and destination repositories. This /may incur higher bandwidth usage and costs/ than expected during normal backup runs.</description></item><item><title>diff</title><link>https://creativeprojects.github.io/resticprofile/reference/profile/diff/index.html</link><pubDate>Wed, 02 Oct 2024 20:38:53 +0000</pubDate><guid>https://creativeprojects.github.io/resticprofile/reference/profile/diff/index.html</guid><description>Section profile.diff This section configures restic command diff . Information on command and flags is copied from the restic manual pages.
The “diff” command shows differences from the first to the second snapshot. The first characters in each line display what has happened to a particular file or directory:
+ The item was added - The item was removed U The metadata (access mode, timestamps, …) for the item was updated M The file’s content was modified T The type was changed, e.g. a file was made a symlink ? Bitrot detected: The file’s content has changed but all metadata is the same Metadata comparison will likely not work if a backup was created using the ‘–ignore-inode’ or ‘–ignore-ctime’ option.</description></item><item><title>dump</title><link>https://creativeprojects.github.io/resticprofile/reference/profile/dump/index.html</link><pubDate>Wed, 02 Oct 2024 20:38:53 +0000</pubDate><guid>https://creativeprojects.github.io/resticprofile/reference/profile/dump/index.html</guid><description>Section profile.dump This section configures restic command dump . Information on command and flags is copied from the restic manual pages.
The “dump” command extracts files from a snapshot from the repository. If a single file is selected, it prints its contents to stdout. Folders are output as a tar (default) or zip file containing the contents of the specified folder. Pass “/” as file name to dump the whole snapshot as an archive file.</description></item><item><title>find</title><link>https://creativeprojects.github.io/resticprofile/reference/profile/find/index.html</link><pubDate>Wed, 02 Oct 2024 20:38:53 +0000</pubDate><guid>https://creativeprojects.github.io/resticprofile/reference/profile/find/index.html</guid><description>Section profile.find This section configures restic command find . Information on command and flags is copied from the restic manual pages.
The “find” command searches for files or directories in snapshots stored in the repo. It can also be used to search for restic blobs or trees for troubleshooting.
Flags used by resticprofile only: Name Type Default Notes run-after one or more strings Run shell command(s) after a successful restic command run-after-fail one or more strings Run shell command(s) after failed restic or shell commands run-before one or more strings Run shell command(s) before a restic command run-finally one or more strings Run shell command(s) always, after all other commands Flags passed to the restic command line: Name Type Default Notes blob true / false false pattern is a blob-ID host true / false OR one or more hostnames only consider snapshots for this host (can be specified multiple times) (default: $RESTIC_HOST). Boolean true is replaced with the hostname of the system. Examples: true, false, "host" human-readable true / false false print sizes in human readable format. restic >= 0.16.0 ignore-case true / false false ignore case for pattern long true / false false use a long listing format showing size and mode newest string "" newest modification date/time oldest string "" oldest modification date/time pack true / false false pattern is a pack-ID path true / false OR one or more strings only consider snapshots including this (absolute) path (can be specified multiple times, snapshots must include all specified paths). Boolean true is replaced with the paths from section “backup”. Examples: true, false, "path" show-pack-id true / false false display the pack-ID the blobs belong to (with –blob or –tree) snapshot one or more strings snapshot id to search in tag true / false OR one or more strings only consider snapshots including tag[,tag,…]. Boolean true is replaced with the tags from section “backup”. Examples: true, false, "tag" tree true / false false pattern is a tree-ID Flags declared for the restic command line in section profile can be overridden in this section.</description></item><item><title>forget</title><link>https://creativeprojects.github.io/resticprofile/reference/profile/forget/index.html</link><pubDate>Wed, 02 Oct 2024 20:38:53 +0000</pubDate><guid>https://creativeprojects.github.io/resticprofile/reference/profile/forget/index.html</guid><description>Section profile.forget This section configures restic command forget . Information on command and flags is copied from the restic manual pages.
The “forget” command removes snapshots according to a policy. All snapshots are first divided into groups according to “–group-by”, and after that the policy specified by the “–keep-” options is applied to each group individually. If there are not enough snapshots to keep one for each duration related “–keep-{within-,}” option, the oldest snapshot in the group is kept additionally.</description></item><item><title>init</title><link>https://creativeprojects.github.io/resticprofile/reference/profile/init/index.html</link><pubDate>Wed, 02 Oct 2024 20:38:53 +0000</pubDate><guid>https://creativeprojects.github.io/resticprofile/reference/profile/init/index.html</guid><description>Section profile.init This section configures restic command init . Information on command and flags is copied from the restic manual pages.
The “init” command initializes a new repository.
Flags passed to the restic command line: Name Type Default Notes copy-chunker-params true / false false copy chunker parameters from the secondary repository (useful with the copy command). restic >= 0.10.0 from-insecure-no-password true / false false use an empty password for the source repository, must be passed to every restic command (insecure). restic >= 0.17.0 from-key-hint string "" key ID of key to try decrypting the source repository first (default: $RESTIC_FROM_KEY_HINT). restic >= 0.14.0 from-password-command string "" shell command to obtain the source repository password from (default: $RESTIC_FROM_PASSWORD_COMMAND). restic >= 0.14.0 from-password-file string "" file to read the source repository password from (default: $RESTIC_FROM_PASSWORD_FILE). restic >= 0.14.0 from-repository string "" source repository to copy chunker parameters from (default: $RESTIC_FROM_REPOSITORY). restic >= 0.14.0 from-repository-file string "" file from which to read the source repository location to copy chunker parameters from (default: $RESTIC_FROM_REPOSITORY_FILE). restic >= 0.14.0 key-hint2 string "" key ID of key to try decrypting the secondary repository first (default: $RESTIC_KEY_HINT2). restic >= 0.10.0 &lt; 0.14.0 password-command2 string "" shell command to obtain the secondary repository password from (default: $RESTIC_PASSWORD_COMMAND2). restic >= 0.10.0 &lt; 0.14.0 password-file2 string "" file to read the secondary repository password from (default: $RESTIC_PASSWORD_FILE2). restic >= 0.10.0 &lt; 0.14.0 repo2 string "" secondary repository to copy chunker parameters from (default: $RESTIC_REPOSITORY2). restic >= 0.10.0 &lt; 0.14.0 repository-file2 string "" file from which to read the secondary repository location to copy chunker parameters from (default: $RESTIC_REPOSITORY_FILE2). restic >= 0.13.0 &lt; 0.14.0 repository-version string "stable" repository format version to use, allowed values are a format version, ’latest’ and ‘stable’. restic >= 0.14.0 Flags declared for the restic command line in section profile can be overridden in this section.</description></item><item><title>key</title><link>https://creativeprojects.github.io/resticprofile/reference/profile/key/index.html</link><pubDate>Wed, 02 Oct 2024 20:38:53 +0000</pubDate><guid>https://creativeprojects.github.io/resticprofile/reference/profile/key/index.html</guid><description>Section profile.key This section configures restic command key . Information on command and flags is copied from the restic manual pages.
The “key” command allows you to set multiple access keys or passwords per repository.
Flags used by resticprofile only: Name Type Default Notes run-after one or more strings Run shell command(s) after a successful restic command run-after-fail one or more strings Run shell command(s) after failed restic or shell commands run-before one or more strings Run shell command(s) before a restic command run-finally one or more strings Run shell command(s) always, after all other commands Flags passed to the restic command line: Name Type Default Notes host true / false OR hostname "" the hostname for new keys. Boolean true is replaced with the hostname of the system. Examples: true, false, "host" . restic >= 0.10.0 &lt; 0.17.0 new-password-file string "" file from which to read the new password. restic &lt; 0.17.0 user string "" the username for new keys. restic >= 0.10.0 &lt; 0.17.0 Flags declared for the restic command line in section profile can be overridden in this section.</description></item><item><title>key-add</title><link>https://creativeprojects.github.io/resticprofile/reference/profile/key-add/index.html</link><pubDate>Wed, 02 Oct 2024 20:38:53 +0000</pubDate><guid>https://creativeprojects.github.io/resticprofile/reference/profile/key-add/index.html</guid><description>Section profile.key-add This section configures restic command key-add available since 0.17.0 . Information on command and flags is copied from the restic manual pages.
The “add” sub-command creates a new key and validates the key. Returns the new key ID.
Flags used by resticprofile only: Name Type Default Notes run-after one or more strings Run shell command(s) after a successful restic command run-after-fail one or more strings Run shell command(s) after failed restic or shell commands run-before one or more strings Run shell command(s) before a restic command run-finally one or more strings Run shell command(s) always, after all other commands Flags passed to the restic command line: Name Type Default Notes host true / false OR hostname "" the hostname for new key. Boolean true is replaced with the hostname of the system. Examples: true, false, "host" . restic >= 0.17.0 new-insecure-no-password true / false false add an empty password for the repository (insecure). restic >= 0.17.0 new-password-file string "" file from which to read the new password. restic >= 0.17.0 user string "" the username for new key. restic >= 0.17.0 Flags declared for the restic command line in section profile can be overridden in this section.</description></item><item><title>key-list</title><link>https://creativeprojects.github.io/resticprofile/reference/profile/key-list/index.html</link><pubDate>Wed, 02 Oct 2024 20:38:53 +0000</pubDate><guid>https://creativeprojects.github.io/resticprofile/reference/profile/key-list/index.html</guid><description>Section profile.key-list This section configures restic command key-list available since 0.17.0 . Information on command and flags is copied from the restic manual pages.
The “list” sub-command lists all the keys (passwords) associated with the repository. Returns the key ID, username, hostname, created time and if it’s the current key being used to access the repository.
Flags used by resticprofile only: Name Type Default Notes run-after one or more strings Run shell command(s) after a successful restic command run-after-fail one or more strings Run shell command(s) after failed restic or shell commands run-before one or more strings Run shell command(s) before a restic command run-finally one or more strings Run shell command(s) always, after all other commands Flags declared for the restic command line in section profile can be overridden in this section.</description></item><item><title>key-passwd</title><link>https://creativeprojects.github.io/resticprofile/reference/profile/key-passwd/index.html</link><pubDate>Wed, 02 Oct 2024 20:38:53 +0000</pubDate><guid>https://creativeprojects.github.io/resticprofile/reference/profile/key-passwd/index.html</guid><description>Section profile.key-passwd This section configures restic command key-passwd available since 0.17.0 . Information on command and flags is copied from the restic manual pages.
The “passwd” sub-command creates a new key, validates the key and remove the old key ID. Returns the new key ID.
Flags used by resticprofile only: Name Type Default Notes run-after one or more strings Run shell command(s) after a successful restic command run-after-fail one or more strings Run shell command(s) after failed restic or shell commands run-before one or more strings Run shell command(s) before a restic command run-finally one or more strings Run shell command(s) always, after all other commands Flags passed to the restic command line: Name Type Default Notes host true / false OR hostname "" the hostname for new key. Boolean true is replaced with the hostname of the system. Examples: true, false, "host" . restic >= 0.17.0 new-insecure-no-password true / false false add an empty password for the repository (insecure). restic >= 0.17.0 new-password-file string "" file from which to read the new password. restic >= 0.17.0 user string "" the username for new key. restic >= 0.17.0 Flags declared for the restic command line in section profile can be overridden in this section.</description></item><item><title>key-remove</title><link>https://creativeprojects.github.io/resticprofile/reference/profile/key-remove/index.html</link><pubDate>Wed, 02 Oct 2024 20:38:53 +0000</pubDate><guid>https://creativeprojects.github.io/resticprofile/reference/profile/key-remove/index.html</guid><description>Section profile.key-remove This section configures restic command key-remove available since 0.17.0 . Information on command and flags is copied from the restic manual pages.
The “remove” sub-command removes the selected key ID. The “remove” command does not allow removing the current key being used to access the repository.
Flags used by resticprofile only: Name Type Default Notes run-after one or more strings Run shell command(s) after a successful restic command run-after-fail one or more strings Run shell command(s) after failed restic or shell commands run-before one or more strings Run shell command(s) before a restic command run-finally one or more strings Run shell command(s) always, after all other commands Flags declared for the restic command line in section profile can be overridden in this section.</description></item><item><title>list</title><link>https://creativeprojects.github.io/resticprofile/reference/profile/list/index.html</link><pubDate>Wed, 02 Oct 2024 20:38:53 +0000</pubDate><guid>https://creativeprojects.github.io/resticprofile/reference/profile/list/index.html</guid><description>Section profile.list This section configures restic command list . Information on command and flags is copied from the restic manual pages.
The “list” command allows listing objects in the repository based on type.
Flags used by resticprofile only: Name Type Default Notes run-after one or more strings Run shell command(s) after a successful restic command run-after-fail one or more strings Run shell command(s) after failed restic or shell commands run-before one or more strings Run shell command(s) before a restic command run-finally one or more strings Run shell command(s) always, after all other commands Flags declared for the restic command line in section profile can be overridden in this section.</description></item><item><title>ls</title><link>https://creativeprojects.github.io/resticprofile/reference/profile/ls/index.html</link><pubDate>Wed, 02 Oct 2024 20:38:53 +0000</pubDate><guid>https://creativeprojects.github.io/resticprofile/reference/profile/ls/index.html</guid><description>Section profile.ls This section configures restic command ls . Information on command and flags is copied from the restic manual pages.
The “ls” command lists files and directories in a snapshot.
The special snapshot ID “latest” can be used to list files and directories of the latest snapshot in the repository. The –host flag can be used in conjunction to select the latest snapshot originating from a certain host only.
File listings can optionally be filtered by directories. Any positional arguments after the snapshot ID are interpreted as absolute directory paths, and only files inside those directories will be listed. If the –recursive flag is used, then the filter will allow traversing into matching directories’ subfolders. Any directory paths specified must be absolute (starting with a path separator); paths use the forward slash ‘/’ as separator.</description></item><item><title>migrate</title><link>https://creativeprojects.github.io/resticprofile/reference/profile/migrate/index.html</link><pubDate>Wed, 02 Oct 2024 20:38:53 +0000</pubDate><guid>https://creativeprojects.github.io/resticprofile/reference/profile/migrate/index.html</guid><description>Section profile.migrate This section configures restic command migrate . Information on command and flags is copied from the restic manual pages.
The “migrate” command checks which migrations can be applied for a repository and prints a list with available migration names. If one or more migration names are specified, these migrations are applied.
Flags used by resticprofile only: Name Type Default Notes run-after one or more strings Run shell command(s) after a successful restic command run-after-fail one or more strings Run shell command(s) after failed restic or shell commands run-before one or more strings Run shell command(s) before a restic command run-finally one or more strings Run shell command(s) always, after all other commands Flags passed to the restic command line: Name Type Default Notes force true / false false apply a migration a second time Flags declared for the restic command line in section profile can be overridden in this section.</description></item><item><title>mount</title><link>https://creativeprojects.github.io/resticprofile/reference/profile/mount/index.html</link><pubDate>Wed, 02 Oct 2024 20:38:53 +0000</pubDate><guid>https://creativeprojects.github.io/resticprofile/reference/profile/mount/index.html</guid><description>Section profile.mount This section configures restic command mount . Information on command and flags is copied from the restic manual pages.
The “mount” command mounts the repository via fuse to a directory. This is a read-only mount.
If you need a different template for directories that contain snapshots, you can pass a time template via –time-template and path templates via –path-template.
Example time template without colons:
–time-template “2006-01-02_15-04-05”
You need to specify a sample format for exactly the following timestamp:</description></item><item><title>prune</title><link>https://creativeprojects.github.io/resticprofile/reference/profile/prune/index.html</link><pubDate>Wed, 02 Oct 2024 20:38:53 +0000</pubDate><guid>https://creativeprojects.github.io/resticprofile/reference/profile/prune/index.html</guid><description>Section profile.prune This section configures restic command prune . Information on command and flags is copied from the restic manual pages.
The “prune” command checks the repository and removes data that is not referenced and therefore not needed any more.
Flags used by resticprofile only: Name Type Default Notes schedule one or more strings OR nested ScheduleConfig Configures the scheduled execution of this profile section. Can be times in systemd timer format or a config structure. Examples: hourly, daily, weekly, monthly, 10:00,14:00,18:00,22:00, Wed,Fri 17:48, *-*-15 02:45, Mon..Fri 00:30 schedule-after-network-online true / false Don’t start this schedule when the network is offline (supported in “systemd”) schedule-capture-environment one or more strings RESTIC_* Set names (or glob expressions) of environment variables to capture during schedule creation. The captured environment is applied prior to “profile.env” when running the schedule. Whether capturing is supported depends on the type of scheduler being used (supported in “systemd” and “launchd”) schedule-ignore-on-battery true / false false Don’t start this schedule when running on battery schedule-ignore-on-battery-less-than integer Don’t start this schedule when running on battery and the state of charge is less than this percentage. Examples: 20, 33, 50, 75 schedule-lock-mode string default Specify how locks are used when running on schedule - see schedules/configuration/. Is one of default, fail, ignore schedule-lock-wait integer OR duration Set the maximum time to wait for acquiring locks when running on schedule. Examples: 150s, 15m, 30m, 45m, 1h, 2h30m schedule-log string Redirect the output into a log file or to syslog when running on schedule. Examples: /resticprofile.log, syslog-tcp://syslog-server:514, syslog:server, syslog: schedule-permission string auto Specify whether the schedule runs with system or user privileges - see schedules/configuration/. Is one of auto, system, user, user_logged_on schedule-priority string background Set the priority at which the schedule is run. Is one of background, standard send-after one or more nested SendMonitoringSection Send HTTP request(s) after a successful restic command send-after-fail one or more nested SendMonitoringSection Send HTTP request(s) after failed restic or shell commands send-before one or more nested SendMonitoringSection Send HTTP request(s) before a restic command send-finally one or more nested SendMonitoringSection Send HTTP request(s) always, after all other commands Flags passed to the restic command line: Name Type Default Notes dry-run true / false false do not modify the repository, just print what would be done. restic >= 0.12.0 max-repack-size string "" maximum size to repack (allowed suffixes: k/K, m/M, g/G, t/T). restic >= 0.12.0 max-unused string "5%" tolerate given limit of unused data (absolute value in bytes with suffixes k/K, m/M, g/G, t/T, a value in % or the word ‘unlimited’). restic >= 0.12.0 repack-cacheable-only true / false false only repack packs which are cacheable. restic >= 0.12.0 repack-small true / false false repack pack files below 80% of target pack size. restic >= 0.14.0 repack-uncompressed true / false false repack all uncompressed data. restic >= 0.14.0 unsafe-recover-no-free-space string "" UNSAFE, READ THE DOCUMENTATION BEFORE USING! Try to recover a repository stuck with no free space. Do not use without trying out ‘prune –max-repack-size 0’ first. restic >= 0.14.0 Flags declared for the restic command line in section profile can be overridden in this section.</description></item><item><title>rebuild-index</title><link>https://creativeprojects.github.io/resticprofile/reference/profile/rebuild-index/index.html</link><pubDate>Wed, 02 Oct 2024 20:38:53 +0000</pubDate><guid>https://creativeprojects.github.io/resticprofile/reference/profile/rebuild-index/index.html</guid><description>Section profile.rebuild-index This section configures restic command rebuild-index removed in 0.16.0 . Information on command and flags is copied from the restic manual pages.
The “rebuild-index” command creates a new index based on the pack files in the repository.
Flags used by resticprofile only: Name Type Default Notes run-after one or more strings Run shell command(s) after a successful restic command run-after-fail one or more strings Run shell command(s) after failed restic or shell commands run-before one or more strings Run shell command(s) before a restic command run-finally one or more strings Run shell command(s) always, after all other commands Flags passed to the restic command line: Name Type Default Notes read-all-packs true / false false read all pack files to generate new index from scratch. restic >= 0.12.0 Flags declared for the restic command line in section profile can be overridden in this section.</description></item><item><title>recover</title><link>https://creativeprojects.github.io/resticprofile/reference/profile/recover/index.html</link><pubDate>Wed, 02 Oct 2024 20:38:53 +0000</pubDate><guid>https://creativeprojects.github.io/resticprofile/reference/profile/recover/index.html</guid><description>Section profile.recover This section configures restic command recover . Information on command and flags is copied from the restic manual pages.
The “recover” command builds a new snapshot from all directories it can find in the raw data of the repository which are not referenced in an existing snapshot. It can be used if, for example, a snapshot has been removed by accident with “forget”.
Flags used by resticprofile only: Name Type Default Notes run-after one or more strings Run shell command(s) after a successful restic command run-after-fail one or more strings Run shell command(s) after failed restic or shell commands run-before one or more strings Run shell command(s) before a restic command run-finally one or more strings Run shell command(s) always, after all other commands Flags declared for the restic command line in section profile can be overridden in this section.</description></item><item><title>repair</title><link>https://creativeprojects.github.io/resticprofile/reference/profile/repair/index.html</link><pubDate>Wed, 02 Oct 2024 20:38:53 +0000</pubDate><guid>https://creativeprojects.github.io/resticprofile/reference/profile/repair/index.html</guid><description>Section profile.repair This section configures restic command repair available since 0.16.0 . Information on command and flags is copied from the restic manual pages.
Repair the repository
Flags used by resticprofile only: Name Type Default Notes run-after one or more strings Run shell command(s) after a successful restic command run-after-fail one or more strings Run shell command(s) after failed restic or shell commands run-before one or more strings Run shell command(s) before a restic command run-finally one or more strings Run shell command(s) always, after all other commands Flags declared for the restic command line in section profile can be overridden in this section.</description></item><item><title>repair-index</title><link>https://creativeprojects.github.io/resticprofile/reference/profile/repair-index/index.html</link><pubDate>Wed, 02 Oct 2024 20:38:53 +0000</pubDate><guid>https://creativeprojects.github.io/resticprofile/reference/profile/repair-index/index.html</guid><description>Section profile.repair-index This section configures restic command repair-index available since 0.16.0 . Information on command and flags is copied from the restic manual pages.
The “repair index” command creates a new index based on the pack files in the repository.
Flags used by resticprofile only: Name Type Default Notes run-after one or more strings Run shell command(s) after a successful restic command run-after-fail one or more strings Run shell command(s) after failed restic or shell commands run-before one or more strings Run shell command(s) before a restic command run-finally one or more strings Run shell command(s) always, after all other commands Flags passed to the restic command line: Name Type Default Notes read-all-packs true / false false read all pack files to generate new index from scratch. restic >= 0.16.0 Flags declared for the restic command line in section profile can be overridden in this section.</description></item><item><title>repair-packs</title><link>https://creativeprojects.github.io/resticprofile/reference/profile/repair-packs/index.html</link><pubDate>Wed, 02 Oct 2024 20:38:53 +0000</pubDate><guid>https://creativeprojects.github.io/resticprofile/reference/profile/repair-packs/index.html</guid><description>Section profile.repair-packs This section configures restic command repair-packs available since 0.16.1 . Information on command and flags is copied from the restic manual pages.
WARNING: The CLI for this command is experimental and will likely change in the future!
The “repair packs” command extracts intact blobs from the specified pack files, rebuilds the index to remove the damaged pack files and removes the pack files from the repository.
Flags used by resticprofile only: Name Type Default Notes run-after one or more strings Run shell command(s) after a successful restic command run-after-fail one or more strings Run shell command(s) after failed restic or shell commands run-before one or more strings Run shell command(s) before a restic command run-finally one or more strings Run shell command(s) always, after all other commands Flags declared for the restic command line in section profile can be overridden in this section.</description></item><item><title>repair-snapshots</title><link>https://creativeprojects.github.io/resticprofile/reference/profile/repair-snapshots/index.html</link><pubDate>Wed, 02 Oct 2024 20:38:53 +0000</pubDate><guid>https://creativeprojects.github.io/resticprofile/reference/profile/repair-snapshots/index.html</guid><description>Section profile.repair-snapshots This section configures restic command repair-snapshots available since 0.16.0 . Information on command and flags is copied from the restic manual pages.
The “repair snapshots” command repairs broken snapshots. It scans the given snapshots and generates new ones with damaged directories and file contents removed. If the broken snapshots are deleted, a prune run will be able to clean up the repository.
The command depends on a correct index, thus make sure to run “repair index” first!</description></item><item><title>restore</title><link>https://creativeprojects.github.io/resticprofile/reference/profile/restore/index.html</link><pubDate>Wed, 02 Oct 2024 20:38:53 +0000</pubDate><guid>https://creativeprojects.github.io/resticprofile/reference/profile/restore/index.html</guid><description>Section profile.restore This section configures restic command restore . Information on command and flags is copied from the restic manual pages.
The “restore” command extracts the data from a snapshot from the repository to a directory.
The special snapshotID “latest” can be used to restore the latest snapshot in the repository.
To only restore a specific subfolder, you can use the “snapshotID:subfolder” syntax, where “subfolder” is a path within the snapshot.</description></item><item><title>retention</title><link>https://creativeprojects.github.io/resticprofile/reference/profile/retention/index.html</link><pubDate>Wed, 02 Oct 2024 20:38:53 +0000</pubDate><guid>https://creativeprojects.github.io/resticprofile/reference/profile/retention/index.html</guid><description>Section profile.retention This section configures restic command forget . Information on command and flags is copied from the restic manual pages.
The “forget” command removes snapshots according to a policy. All snapshots are first divided into groups according to “–group-by”, and after that the policy specified by the “–keep-” options is applied to each group individually. If there are not enough snapshots to keep one for each duration related “–keep-{within-,}” option, the oldest snapshot in the group is kept additionally.</description></item><item><title>rewrite</title><link>https://creativeprojects.github.io/resticprofile/reference/profile/rewrite/index.html</link><pubDate>Wed, 02 Oct 2024 20:38:53 +0000</pubDate><guid>https://creativeprojects.github.io/resticprofile/reference/profile/rewrite/index.html</guid><description>Section profile.rewrite This section configures restic command rewrite available since 0.15.0 . Information on command and flags is copied from the restic manual pages.
The “rewrite” command excludes files from existing snapshots. It creates new snapshots containing the same data as the original ones, but without the files you specify to exclude. All metadata (time, host, tags) will be preserved.
The snapshots to rewrite are specified using the –host, –tag and –path options, or by providing a list of snapshot IDs. Please note that specifying neither any of these options nor a snapshot ID will cause the command to rewrite all snapshots.</description></item><item><title>snapshots</title><link>https://creativeprojects.github.io/resticprofile/reference/profile/snapshots/index.html</link><pubDate>Wed, 02 Oct 2024 20:38:53 +0000</pubDate><guid>https://creativeprojects.github.io/resticprofile/reference/profile/snapshots/index.html</guid><description>Section profile.snapshots This section configures restic command snapshots . Information on command and flags is copied from the restic manual pages.
The “snapshots” command lists all snapshots stored in the repository.
Flags used by resticprofile only: Name Type Default Notes run-after one or more strings Run shell command(s) after a successful restic command run-after-fail one or more strings Run shell command(s) after failed restic or shell commands run-before one or more strings Run shell command(s) before a restic command run-finally one or more strings Run shell command(s) always, after all other commands Flags passed to the restic command line: Name Type Default Notes compact true / false false use compact output format group-by string group snapshots by host, paths and/or tags, separated by comma. restic >= 0.10.0 host true / false OR one or more hostnames only consider snapshots for this host (can be specified multiple times) (default: $RESTIC_HOST). Boolean true is replaced with the hostname of the system. Examples: true, false, "host" last true / false false only show the last snapshot for each host and path. restic &lt; 0.13.0 latest integer 0 only show the last n snapshots for each host and path. restic >= 0.13.0 path true / false OR one or more strings only consider snapshots including this (absolute) path (can be specified multiple times, snapshots must include all specified paths). Boolean true is replaced with the paths from section “backup”. Examples: true, false, "path" tag true / false OR one or more strings only consider snapshots including tag[,tag,…]. Boolean true is replaced with the tags from section “backup”. Examples: true, false, "tag" Flags declared for the restic command line in section profile can be overridden in this section.</description></item><item><title>stats</title><link>https://creativeprojects.github.io/resticprofile/reference/profile/stats/index.html</link><pubDate>Wed, 02 Oct 2024 20:38:53 +0000</pubDate><guid>https://creativeprojects.github.io/resticprofile/reference/profile/stats/index.html</guid><description>Section profile.stats This section configures restic command stats . Information on command and flags is copied from the restic manual pages.
The “stats” command walks one or multiple snapshots in a repository and accumulates statistics about the data stored therein. It reports on the number of unique files and their sizes, according to one of the counting modes as given by the –mode flag.
It operates on all snapshots matching the selection criteria or all snapshots if nothing is specified. The special snapshot ID “latest” is also supported. Some modes make more sense over just a single snapshot, while others are useful across all snapshots, depending on what you are trying to calculate.</description></item><item><title>tag</title><link>https://creativeprojects.github.io/resticprofile/reference/profile/tag/index.html</link><pubDate>Wed, 02 Oct 2024 20:38:53 +0000</pubDate><guid>https://creativeprojects.github.io/resticprofile/reference/profile/tag/index.html</guid><description>Section profile.tag This section configures restic command tag . Information on command and flags is copied from the restic manual pages.
The “tag” command allows you to modify tags on exiting snapshots.
You can either set/replace the entire set of tags on a snapshot, or add tags to/remove tags from the existing set.
When no snapshot-ID is given, all snapshots matching the host, tag and path filter criteria are modified.
Flags used by resticprofile only: Name Type Default Notes run-after one or more strings Run shell command(s) after a successful restic command run-after-fail one or more strings Run shell command(s) after failed restic or shell commands run-before one or more strings Run shell command(s) before a restic command run-finally one or more strings Run shell command(s) always, after all other commands Flags passed to the restic command line: Name Type Default Notes add one or more strings tags which will be added to the existing tags in the format tag[,tag,…] host true / false OR one or more hostnames only consider snapshots for this host (can be specified multiple times) (default: $RESTIC_HOST). Boolean true is replaced with the hostname of the system. Examples: true, false, "host" path true / false OR one or more strings only consider snapshots including this (absolute) path (can be specified multiple times, snapshots must include all specified paths). Boolean true is replaced with the paths from section “backup”. Examples: true, false, "path" remove one or more strings tags which will be removed from the existing tags in the format tag[,tag,…] set one or more strings tags which will replace the existing tags in the format tag[,tag,…] tag true / false OR one or more strings only consider snapshots including tag[,tag,…]. Boolean true is replaced with the tags from section “backup”. Examples: true, false, "tag" Flags declared for the restic command line in section profile can be overridden in this section.</description></item><item><title>unlock</title><link>https://creativeprojects.github.io/resticprofile/reference/profile/unlock/index.html</link><pubDate>Wed, 02 Oct 2024 20:38:53 +0000</pubDate><guid>https://creativeprojects.github.io/resticprofile/reference/profile/unlock/index.html</guid><description>Section profile.unlock This section configures restic command unlock . Information on command and flags is copied from the restic manual pages.
The “unlock” command removes stale locks that have been created by other restic processes.
Flags used by resticprofile only: Name Type Default Notes run-after one or more strings Run shell command(s) after a successful restic command run-after-fail one or more strings Run shell command(s) after failed restic or shell commands run-before one or more strings Run shell command(s) before a restic command run-finally one or more strings Run shell command(s) always, after all other commands Flags passed to the restic command line: Name Type Default Notes remove-all true / false false remove all locks, even non-stale ones Flags declared for the restic command line in section profile can be overridden in this section.</description></item></channel></rss>