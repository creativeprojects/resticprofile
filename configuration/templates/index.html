<!doctype html><html lang=en-gb dir=ltr itemscope itemtype=http://schema.org/Article data-r-output-format=html><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.145.0"><meta name=generator content="Relearn 7.6.1"><meta name=description content='Templates are a great way to compose configuration profiles.
Please keep in mind that yaml files are sensitive to the number of spaces. Also if you declare a block already declared, it overrides the previous declaration (instead of merging them).
For that matter, configuration templates are probably more useful if you use the toml or hcl configuration format.
Here’s a simple example
{{ define "hello" }} hello = "world" {{ end }} To use the content of this template anywhere in your configuration, simply call it:'><meta name=author content><meta name=twitter:card content="summary"><meta name=twitter:title content="Templates :: resticprofile"><meta name=twitter:description content='Templates are a great way to compose configuration profiles.
Please keep in mind that yaml files are sensitive to the number of spaces. Also if you declare a block already declared, it overrides the previous declaration (instead of merging them).
For that matter, configuration templates are probably more useful if you use the toml or hcl configuration format.
Here’s a simple example
{{ define "hello" }} hello = "world" {{ end }} To use the content of this template anywhere in your configuration, simply call it:'><meta property="og:url" content="https://creativeprojects.github.io/resticprofile/configuration/templates/index.html"><meta property="og:site_name" content="resticprofile"><meta property="og:title" content="Templates :: resticprofile"><meta property="og:description" content='Templates are a great way to compose configuration profiles.
Please keep in mind that yaml files are sensitive to the number of spaces. Also if you declare a block already declared, it overrides the previous declaration (instead of merging them).
For that matter, configuration templates are probably more useful if you use the toml or hcl configuration format.
Here’s a simple example
{{ define "hello" }} hello = "world" {{ end }} To use the content of this template anywhere in your configuration, simply call it:'><meta property="og:locale" content="en_gb"><meta property="og:type" content="article"><meta property="article:section" content="Configuration file"><meta itemprop=name content="Templates :: resticprofile"><meta itemprop=description content='Templates are a great way to compose configuration profiles.
Please keep in mind that yaml files are sensitive to the number of spaces. Also if you declare a block already declared, it overrides the previous declaration (instead of merging them).
For that matter, configuration templates are probably more useful if you use the toml or hcl configuration format.
Here’s a simple example
{{ define "hello" }} hello = "world" {{ end }} To use the content of this template anywhere in your configuration, simply call it:'><meta itemprop=wordCount content="2284"><title>Templates :: resticprofile</title>
<link href=https://creativeprojects.github.io/resticprofile/images/logo.png?1748261438 rel=icon type=image/png><link href=https://creativeprojects.github.io/resticprofile/fonts/fontawesome/css/fontawesome-all.min.css?1748261438 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=https://creativeprojects.github.io/resticprofile/fonts/fontawesome/css/fontawesome-all.min.css?1748261438 rel=stylesheet></noscript><link href=https://creativeprojects.github.io/resticprofile/css/perfect-scrollbar/perfect-scrollbar.min.css?1748261438 rel=stylesheet><link href=https://creativeprojects.github.io/resticprofile/css/theme.min.css?1748261438 rel=stylesheet><link href=https://creativeprojects.github.io/resticprofile/css/format-html.min.css?1748261438 rel=stylesheet id=R-format-style><link href=https://creativeprojects.github.io/resticprofile/css/auto-complete/auto-complete.min.css?1748261438 rel=stylesheet><script src=https://creativeprojects.github.io/resticprofile/js/auto-complete/auto-complete.min.js?1748261438 defer></script><script src=https://creativeprojects.github.io/resticprofile/js/lunr/lunr.min.js?1748261438 defer></script><script src=https://creativeprojects.github.io/resticprofile/js/lunr/lunr.stemmer.support.min.js?1748261438 defer></script><script src=https://creativeprojects.github.io/resticprofile/js/lunr/lunr.multi.min.js?1748261438 defer></script><script src=https://creativeprojects.github.io/resticprofile/js/lunr/lunr.en.min.js?1748261438 defer></script><script src=https://creativeprojects.github.io/resticprofile/js/search.min.js?1748261438 defer></script><script>window.relearn=window.relearn||{},window.relearn.min=`.min`,window.relearn.path="/configuration/templates/index.html",window.relearn.relBasePath="../..",window.relearn.relBaseUri="../..",window.relearn.absBaseUri="https://creativeprojects.github.io/resticprofile",window.relearn.contentLangs=["en"],window.relearn.index_js_url="https://creativeprojects.github.io/resticprofile/searchindex.en.js?1748261438",window.relearn.disableAnchorCopy=!1,window.relearn.disableAnchorScrolling=!1,window.relearn.disableInlineCopyToClipboard=!1,window.relearn.enableBlockCodeWrap=!0,window.relearn.getItem=(e,t)=>e.getItem(t),window.relearn.setItem=(e,t,n)=>e.setItem(t,n),window.relearn.removeItem=(e,t)=>e.removeItem(t),window.relearn.themevariants=["relearn-auto","relearn-light","relearn-dark"],window.relearn.customvariantname="my-custom-variant",window.relearn.changeVariant=function(e){var t=document.documentElement.dataset.rThemeVariant;window.relearn.setItem(window.localStorage,window.relearn.absBaseUri+"/variant",e),document.documentElement.dataset.rThemeVariant=e,t!=e&&(document.dispatchEvent(new CustomEvent("themeVariantLoaded",{detail:{variant:e,oldVariant:t}})),window.relearn.markVariant())},window.relearn.markVariant=function(){var e=window.relearn.getItem(window.localStorage,window.relearn.absBaseUri+"/variant");document.querySelectorAll(".R-variantswitcher select").forEach(t=>{t.value=e})},window.relearn.initVariant=function(){var e=window.relearn.getItem(window.localStorage,window.relearn.absBaseUri+"/variant")??"";e==window.relearn.customvariantname||(!e||!window.relearn.themevariants.includes(e))&&(e=window.relearn.themevariants[0],window.relearn.setItem(window.localStorage,window.relearn.absBaseUri+"/variant",e)),document.documentElement.dataset.rThemeVariant=e},window.relearn.initVariant(),window.relearn.markVariant(),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`</script></head><body class="mobile-support html" data-url=https://creativeprojects.github.io/resticprofile/configuration/templates/index.html><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><button class=topbar-control onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></div><div class="topbar-button topbar-button-toc" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><button class=topbar-control onclick=toggleTopbarFlyout(this) type=button title="Table of Contents (CTRL+ALT+t)"><i class="fa-fw fas fa-list-alt"></i></button><div class=topbar-content><div class=topbar-content-wrapper><nav class=TableOfContents><ul><li><a href=#debugging-your-template-and-variable-expansion>Debugging your template and variable expansion</a></li><li><a href=#limitations-of-using-templates>Limitations of using templates</a></li><li><a href=#documentation-on-template-variable-expansion-and-other-configuration-scripting>Documentation on template, variable expansion and other configuration scripting</a></li><li><a href=#template-functions>Template functions</a></li></ul></nav></div></div></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=https://creativeprojects.github.io/resticprofile/index.html><span itemprop=name>resticprofile</span></a><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=https://creativeprojects.github.io/resticprofile/configuration/index.html><span itemprop=name>Configuration file</span></a><meta itemprop=position content="2">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>Templates</span><meta itemprop=position content="3"></li></ol><div class="topbar-area topbar-area-end" data-area=end><div class="topbar-button topbar-button-prev" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=https://creativeprojects.github.io/resticprofile/configuration/http_hooks/index.html title="HTTP Hooks (🡐)"><i class="fa-fw fas fa-chevron-left"></i></a></div><div class="topbar-button topbar-button-next" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=https://creativeprojects.github.io/resticprofile/configuration/variables/index.html title="Variables (🡒)"><i class="fa-fw fas fa-chevron-right"></i></a></div><div class="topbar-button topbar-button-more" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><button class=topbar-control onclick=toggleTopbarFlyout(this) type=button title=More><i class="fa-fw fas fa-ellipsis-v"></i></button><div class=topbar-content><div class=topbar-content-wrapper><div class="topbar-area topbar-area-more" data-area=more></div></div></div></div></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable configuration" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=templates>Templates</h1><p>Templates are a great way to compose configuration profiles.</p><p>Please keep in mind that <code>yaml</code> files are sensitive to the number of spaces. Also if you declare a block already declared, it overrides the previous declaration (instead of merging them).</p><p>For that matter, configuration templates are probably more useful if you use the <code>toml</code> or <code>hcl</code> configuration format.</p><p>Here&rsquo;s a simple example</p><div class="highlight wrap-code" dir=auto><pre tabindex=0><code>{{ define &#34;hello&#34; }}
hello = &#34;world&#34;
{{ end }}</code></pre></div><p>To use the content of this template anywhere in your configuration, simply call it:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0><code>{{ template &#34;hello&#34; . }}</code></pre></div><p>Note the <strong>dot</strong> after the name: it&rsquo;s used to pass the variables to the template. Without it, all your variables (like <code>.Profile.Name</code>) would display <code>&lt;no value></code>.</p><p>Here&rsquo;s a working example:</p><div class=tab-panel data-tab-group=config-with-json><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=toml class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("config-with-json","toml")'>
<span class=tab-nav-text>toml</span>
</button>
<button data-tab-item=yaml class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("config-with-json","yaml")'>
<span class=tab-nav-text>yaml</span>
</button>
<button data-tab-item=hcl class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("config-with-json","hcl")'>
<span class=tab-nav-text>hcl</span>
</button>
<button data-tab-item=json class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("config-with-json","json")'>
<span class=tab-nav-text>json</span></button></div><div class=tab-content-container><div data-tab-item=toml class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-toml data-lang=toml><span class=line><span class=cl><span class=c>#</span>
</span></span><span class=line><span class=cl><span class=c># This is an example of configuration using nested templates</span>
</span></span><span class=line><span class=cl><span class=c>#</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c># nested template declarations</span>
</span></span><span class=line><span class=cl><span class=c># this template declaration won&#39;t appear here in the configuration file</span>
</span></span><span class=line><span class=cl><span class=c># it will only appear when called by { { template &#34;backup_root&#34; . } }</span>
</span></span><span class=line><span class=cl><span class=p>{{</span> <span class=nx>define</span> <span class=s2>&#34;backup_root&#34;</span> <span class=p>}}</span>
</span></span><span class=line><span class=cl>    <span class=nx>exclude</span> <span class=p>=</span> <span class=p>[</span> <span class=s2>&#34;{{ .Profile.Name }}-backup.log&#34;</span> <span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=nx>exclude-file</span> <span class=p>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;{{ .ConfigDir }}/root-excludes&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;{{ .ConfigDir }}/excludes&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=nx>exclude-caches</span> <span class=p>=</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>    <span class=nx>tag</span> <span class=p>=</span> <span class=p>[</span> <span class=s2>&#34;root&#34;</span> <span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=nx>source</span> <span class=p>=</span> <span class=p>[</span> <span class=s2>&#34;/&#34;</span> <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>{{</span> <span class=nx>end</span> <span class=p>}}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>version</span> <span class=p>=</span> <span class=s2>&#34;1&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=nx>global</span><span class=p>]</span>
</span></span><span class=line><span class=cl>  <span class=nx>priority</span> <span class=p>=</span> <span class=s2>&#34;low&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nx>ionice</span> <span class=p>=</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>  <span class=nx>ionice-class</span> <span class=p>=</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl>  <span class=nx>ionice-level</span> <span class=p>=</span> <span class=mi>6</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=nx>base</span><span class=p>]</span>
</span></span><span class=line><span class=cl>  <span class=nx>status-file</span> <span class=p>=</span> <span class=s2>&#34;{{ .Env.HOME }}/status.json&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=p>[</span><span class=nx>base</span><span class=p>.</span><span class=nx>snapshots</span><span class=p>]</span>
</span></span><span class=line><span class=cl>      <span class=nx>host</span> <span class=p>=</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=p>[</span><span class=nx>base</span><span class=p>.</span><span class=nx>retention</span><span class=p>]</span>
</span></span><span class=line><span class=cl>      <span class=nx>host</span> <span class=p>=</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>      <span class=nx>after-backup</span> <span class=p>=</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>      <span class=nx>keep-within</span> <span class=p>=</span> <span class=s2>&#34;30d&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c>#########################################################</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=nx>nas</span><span class=p>]</span>
</span></span><span class=line><span class=cl>  <span class=nx>inherit</span> <span class=p>=</span> <span class=s2>&#34;base&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nx>repository</span> <span class=p>=</span> <span class=s2>&#34;rest:http://{{ .Env.BACKUP_REST_USER }}:{{ .Env.BACKUP_REST_PASSWORD }}@nas:8000/root&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nx>password-file</span> <span class=p>=</span> <span class=s2>&#34;nas-key&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c># root</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=nx>nas-root</span><span class=p>]</span>
</span></span><span class=line><span class=cl>  <span class=nx>inherit</span> <span class=p>=</span> <span class=s2>&#34;nas&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=p>[</span><span class=nx>nas-root</span><span class=p>.</span><span class=nx>backup</span><span class=p>]</span>
</span></span><span class=line><span class=cl>      <span class=c># get the content of &#34;backup_root&#34; defined at the top</span>
</span></span><span class=line><span class=cl>      <span class=p>{{</span> <span class=nx>template</span> <span class=s2>&#34;backup_root&#34;</span> <span class=p>.</span> <span class=p>}}</span>
</span></span><span class=line><span class=cl>      <span class=nx>schedule</span> <span class=p>=</span> <span class=s2>&#34;01:47&#34;</span>
</span></span><span class=line><span class=cl>      <span class=nx>schedule-permission</span> <span class=p>=</span> <span class=s2>&#34;system&#34;</span>
</span></span><span class=line><span class=cl>      <span class=nx>schedule-log</span> <span class=p>=</span> <span class=s2>&#34;{{ .Profile.Name }}-backup.log&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c>#########################################################</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=nx>azure</span><span class=p>]</span>
</span></span><span class=line><span class=cl>  <span class=nx>inherit</span> <span class=p>=</span> <span class=s2>&#34;base&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nx>repository</span> <span class=p>=</span> <span class=s2>&#34;azure:restic:/&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nx>password-file</span> <span class=p>=</span> <span class=s2>&#34;azure-key&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nx>lock</span> <span class=p>=</span> <span class=s2>&#34;/tmp/resticprofile-azure.lock&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=p>[</span><span class=nx>azure</span><span class=p>.</span><span class=nx>backup</span><span class=p>]</span>
</span></span><span class=line><span class=cl>      <span class=nx>schedule-permission</span> <span class=p>=</span> <span class=s2>&#34;system&#34;</span>
</span></span><span class=line><span class=cl>      <span class=nx>schedule-log</span> <span class=p>=</span> <span class=s2>&#34;{{ .Profile.Name }}-backup.log&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c># root</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=nx>azure-root</span><span class=p>]</span>
</span></span><span class=line><span class=cl>  <span class=nx>inherit</span> <span class=p>=</span> <span class=s2>&#34;azure&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=p>[</span><span class=nx>azure-root</span><span class=p>.</span><span class=nx>backup</span><span class=p>]</span>
</span></span><span class=line><span class=cl>      <span class=c># get the content of &#34;backup_root&#34; defined at the top</span>
</span></span><span class=line><span class=cl>      <span class=p>{{</span> <span class=nx>template</span> <span class=s2>&#34;backup_root&#34;</span> <span class=p>.</span> <span class=p>}}</span>
</span></span><span class=line><span class=cl>      <span class=nx>schedule</span> <span class=p>=</span> <span class=s2>&#34;03:58&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c># mysql</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=nx>azure-mysql</span><span class=p>]</span>
</span></span><span class=line><span class=cl>  <span class=nx>inherit</span> <span class=p>=</span> <span class=s2>&#34;azure&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=p>[</span><span class=nx>azure-mysql</span><span class=p>.</span><span class=nx>backup</span><span class=p>]</span>
</span></span><span class=line><span class=cl>      <span class=nx>tag</span> <span class=p>=</span> <span class=p>[</span> <span class=s2>&#34;mysql&#34;</span> <span class=p>]</span>
</span></span><span class=line><span class=cl>      <span class=nx>run-before</span> <span class=p>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>          <span class=s2>&#34;rm -f /tmp/mysqldumpall.sql&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>          <span class=s2>&#34;mysqldump -u{{ .Env.MYSQL_BACKUP_USER }} -p{{ .Env.MYSQL_BACKUP_PASSWORD }} --all-databases &gt; /tmp/mysqldumpall.sql&#34;</span>
</span></span><span class=line><span class=cl>      <span class=p>]</span>
</span></span><span class=line><span class=cl>      <span class=nx>source</span> <span class=p>=</span> <span class=s2>&#34;/tmp/mysqldumpall.sql&#34;</span>
</span></span><span class=line><span class=cl>      <span class=nx>run-after</span> <span class=p>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>          <span class=s2>&#34;rm -f /tmp/mysqldumpall.sql&#34;</span>
</span></span><span class=line><span class=cl>      <span class=p>]</span>
</span></span><span class=line><span class=cl>      <span class=nx>schedule</span> <span class=p>=</span> <span class=s2>&#34;03:18&#34;</span></span></span></code></pre></div></div></div><div data-tab-item=yaml class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c>#</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># This is an example of configuration using nested templates</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c>#</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># nested template declarations</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># this template declaration won&#39;t appear here in the configuration file</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># it will only appear when called by { { template &#34;backup_root&#34; . } }</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>{{<span class=w> </span><span class=l>define &#34;backup_root&#34; }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>exclude</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=s1>&#39;{{ .Profile.Name }}-backup.log&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>exclude-file</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=s1>&#39;{{ .ConfigDir }}/root-excludes&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=s1>&#39;{{ .ConfigDir }}/excludes&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>exclude-caches</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>tag</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>root</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>source</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>/</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>{{<span class=w> </span><span class=l>end }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;1&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>global</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>priority</span><span class=p>:</span><span class=w> </span><span class=l>low</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>ionice</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>ionice-class</span><span class=p>:</span><span class=w> </span><span class=m>2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>ionice-level</span><span class=p>:</span><span class=w> </span><span class=m>6</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>base</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>status-file</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;{{ .Env.HOME }}/status.json&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>snapshots</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>host</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>retention</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>host</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>after-backup</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>keep-within</span><span class=p>:</span><span class=w> </span><span class=l>30d</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>nas</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>inherit</span><span class=p>:</span><span class=w> </span><span class=l>base</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>repository</span><span class=p>:</span><span class=w> </span><span class=p>&gt;-</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>    rest:http://{{ .Env.BACKUP_REST_USER }}:{{ .Env.BACKUP_REST_PASSWORD
</span></span></span><span class=line><span class=cl><span class=sd>    }}@nas:8000/root</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>password-file</span><span class=p>:</span><span class=w> </span><span class=l>nas-key</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>nas-root</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>inherit</span><span class=p>:</span><span class=w> </span><span class=l>nas</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>backup</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># get the content of &#34;backup_root&#34; defined at the top</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>{{<span class=w> </span><span class=l>template &#34;backup_root&#34; . }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>schedule</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;01:47&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>schedule-permission</span><span class=p>:</span><span class=w> </span><span class=l>system</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>schedule-log</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;{{ .Profile.Name }}-backup.log&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>azure</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>inherit</span><span class=p>:</span><span class=w> </span><span class=l>base</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>repository</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;azure:restic:/&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>password-file</span><span class=p>:</span><span class=w> </span><span class=l>azure-key</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>lock</span><span class=p>:</span><span class=w> </span><span class=l>/tmp/resticprofile-azure.lock</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>backup</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>schedule-permission</span><span class=p>:</span><span class=w> </span><span class=l>system</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>schedule-log</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;{{ .Profile.Name }}-backup.log&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>azure-root</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>inherit</span><span class=p>:</span><span class=w> </span><span class=l>azure</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>backup</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># get the content of &#34;backup_root&#34; defined at the top</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>{{<span class=w> </span><span class=l>template &#34;backup_root&#34; . }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>schedule</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;03:58&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>azure-mysql</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>inherit</span><span class=p>:</span><span class=w> </span><span class=l>azure</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>backup</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>tag</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>mysql</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>run-before</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>rm -f /tmp/mysqldumpall.sql</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=p>&gt;-</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>        mysqldump -u{{ .Env.MYSQL_BACKUP_USER }} -p{{ .Env.MYSQL_BACKUP_PASSWORD
</span></span></span><span class=line><span class=cl><span class=sd>        }} --all-databases &gt; /tmp/mysqldumpall.sql</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>source</span><span class=p>:</span><span class=w> </span><span class=l>/tmp/mysqldumpall.sql</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>run-after</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>rm -f /tmp/mysqldumpall.sql</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>schedule</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;03:18&#39;</span></span></span></code></pre></div></div></div><div data-tab-item=hcl class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-hcl data-lang=hcl><span class=line><span class=cl><span class=c1>#
</span></span></span><span class=line><span class=cl><span class=c1># This is an example of configuration using nested templates
</span></span></span><span class=line><span class=cl><span class=c1>#
</span></span></span><span class=line><span class=cl><span class=c1>
</span></span></span><span class=line><span class=cl><span class=c1># nested template declarations
</span></span></span><span class=line><span class=cl><span class=c1># this template declaration won&#39;t appear here in the configuration file
</span></span></span><span class=line><span class=cl><span class=c1># it will only appear when called by { { template &#34;backup_root&#34; . } }
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>{{ <span class=k>define</span> <span class=s2>&#34;backup_root&#34;</span> }}
</span></span><span class=line><span class=cl><span class=n>  &#34;exclude&#34;</span> <span class=o>=</span> <span class=p>[</span><span class=s2>&#34;{{ .Profile.Name }}-backup.log&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>  &#34;exclude-file&#34;</span> <span class=o>=</span> <span class=p>[</span><span class=s2>&#34;{{ .ConfigDir }}/root-excludes&#34;, &#34;{{ .ConfigDir }}/excludes&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>  &#34;exclude-caches&#34;</span> <span class=o>=</span> <span class=kt>true</span>
</span></span><span class=line><span class=cl><span class=n>  &#34;tag&#34;</span> <span class=o>=</span> <span class=p>[</span><span class=s2>&#34;root&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>  &#34;source&#34;</span> <span class=o>=</span> <span class=p>[</span><span class=s2>&#34;/&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>{{<span class=k>end</span>}}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=s2>&#34;global&#34;</span> <span class=o>=</span> {
</span></span><span class=line><span class=cl><span class=n>  &#34;priority&#34;</span> <span class=o>=</span> <span class=s2>&#34;low&#34;</span>
</span></span><span class=line><span class=cl><span class=n>  &#34;ionice&#34;</span> <span class=o>=</span> <span class=kt>true</span>
</span></span><span class=line><span class=cl><span class=n>  &#34;ionice-class&#34;</span> <span class=o>=</span> <span class=m>2</span>
</span></span><span class=line><span class=cl><span class=n>  &#34;ionice-level&#34;</span> <span class=o>=</span> <span class=m>6</span>
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=s2>&#34;base&#34;</span> <span class=o>=</span> {
</span></span><span class=line><span class=cl><span class=n>  &#34;status-file&#34;</span> <span class=o>=</span> <span class=s2>&#34;{{ .Env.HOME }}/status.json&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>  &#34;snapshots&#34;</span> <span class=o>=</span> {
</span></span><span class=line><span class=cl><span class=n>    &#34;host&#34;</span> <span class=o>=</span> <span class=kt>true</span>
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>  &#34;retention&#34;</span> <span class=o>=</span> {
</span></span><span class=line><span class=cl><span class=n>    &#34;host&#34;</span> <span class=o>=</span> <span class=kt>true</span>
</span></span><span class=line><span class=cl><span class=n>    &#34;after-backup&#34;</span> <span class=o>=</span> <span class=kt>true</span>
</span></span><span class=line><span class=cl><span class=n>    &#34;keep-within&#34;</span> <span class=o>=</span> <span class=s2>&#34;30d&#34;</span>
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=s2>&#34;nas&#34;</span> <span class=o>=</span> {
</span></span><span class=line><span class=cl><span class=n>  &#34;inherit&#34;</span> <span class=o>=</span> <span class=s2>&#34;base&#34;</span>
</span></span><span class=line><span class=cl><span class=n>  &#34;repository&#34;</span> <span class=o>=</span> <span class=s2>&#34;rest:http://{{ .Env.BACKUP_REST_USER }}:{{ .Env.BACKUP_REST_PASSWORD }}@nas:8000/root&#34;</span>
</span></span><span class=line><span class=cl><span class=n>  &#34;password-file&#34;</span> <span class=o>=</span> <span class=s2>&#34;nas-key&#34;</span>
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=s2>&#34;nas-root&#34;</span> <span class=o>=</span> {
</span></span><span class=line><span class=cl><span class=n>  &#34;inherit&#34;</span> <span class=o>=</span> <span class=s2>&#34;nas&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>  &#34;backup&#34;</span> <span class=o>=</span> {<span class=c1>
</span></span></span><span class=line><span class=cl><span class=c1>    # get the content of &#34;backup_root&#34; defined at the top
</span></span></span><span class=line><span class=cl><span class=c1></span>    {{ <span class=k>template</span> <span class=s2>&#34;backup_root&#34;</span> <span class=p>.</span> }}
</span></span><span class=line><span class=cl><span class=n>    &#34;schedule&#34;</span> <span class=o>=</span> <span class=s2>&#34;01:47&#34;</span>
</span></span><span class=line><span class=cl><span class=n>    &#34;schedule-permission&#34;</span> <span class=o>=</span> <span class=s2>&#34;system&#34;</span>
</span></span><span class=line><span class=cl><span class=n>    &#34;schedule-log&#34;</span> <span class=o>=</span> <span class=s2>&#34;{{ .Profile.Name }}-backup.log&#34;</span>
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=s2>&#34;azure&#34;</span> <span class=o>=</span> {
</span></span><span class=line><span class=cl><span class=n>  &#34;inherit&#34;</span> <span class=o>=</span> <span class=s2>&#34;base&#34;</span>
</span></span><span class=line><span class=cl><span class=n>  &#34;repository&#34;</span> <span class=o>=</span> <span class=s2>&#34;azure:restic:/&#34;</span>
</span></span><span class=line><span class=cl><span class=n>  &#34;password-file&#34;</span> <span class=o>=</span> <span class=s2>&#34;azure-key&#34;</span>
</span></span><span class=line><span class=cl><span class=n>  &#34;lock&#34;</span> <span class=o>=</span> <span class=s2>&#34;/tmp/resticprofile-azure.lock&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>  &#34;backup&#34;</span> <span class=o>=</span> {
</span></span><span class=line><span class=cl><span class=n>    &#34;schedule-permission&#34;</span> <span class=o>=</span> <span class=s2>&#34;system&#34;</span>
</span></span><span class=line><span class=cl><span class=n>    &#34;schedule-log&#34;</span> <span class=o>=</span> <span class=s2>&#34;{{ .Profile.Name }}-backup.log&#34;</span>
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=s2>&#34;azure-root&#34;</span> <span class=o>=</span> {
</span></span><span class=line><span class=cl><span class=n>  &#34;inherit&#34;</span> <span class=o>=</span> <span class=s2>&#34;azure&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>  &#34;backup&#34;</span> <span class=o>=</span> {<span class=c1>
</span></span></span><span class=line><span class=cl><span class=c1>    # get the content of &#34;backup_root&#34; defined at the top
</span></span></span><span class=line><span class=cl><span class=c1></span>    {{ <span class=k>template</span> <span class=s2>&#34;backup_root&#34;</span> <span class=p>.</span> }}
</span></span><span class=line><span class=cl><span class=n>    &#34;schedule&#34;</span> <span class=o>=</span> <span class=s2>&#34;03:58&#34;</span>
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=s2>&#34;azure-mysql&#34;</span> <span class=o>=</span> {
</span></span><span class=line><span class=cl><span class=n>  &#34;inherit&#34;</span> <span class=o>=</span> <span class=s2>&#34;azure&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>  &#34;backup&#34;</span> <span class=o>=</span> {
</span></span><span class=line><span class=cl><span class=n>    &#34;tag&#34;</span> <span class=o>=</span> <span class=p>[</span><span class=s2>&#34;mysql&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>    &#34;run-before&#34;</span> <span class=o>=</span> <span class=p>[</span><span class=s2>&#34;rm -f /tmp/mysqldumpall.sql&#34;, &#34;mysqldump -u{{ .Env.MYSQL_BACKUP_USER }} -p{{ .Env.MYSQL_BACKUP_PASSWORD }} --all-databases &gt; /tmp/mysqldumpall.sql&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>    &#34;source&#34;</span> <span class=o>=</span> <span class=s2>&#34;/tmp/mysqldumpall.sql&#34;</span>
</span></span><span class=line><span class=cl><span class=n>    &#34;run-after&#34;</span> <span class=o>=</span> <span class=p>[</span><span class=s2>&#34;rm -f /tmp/mysqldumpall.sql&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>    &#34;schedule&#34;</span> <span class=o>=</span> <span class=s2>&#34;03:18&#34;</span>
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>}</span></span></code></pre></div></div></div><div data-tab-item=json class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span><span class=err>{</span> <span class=err>define</span> <span class=nt>&#34;backup_root&#34;</span> <span class=p>}</span><span class=err>}</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;exclude&#34;</span><span class=err>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;{{ .Profile.Name }}-backup.log&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span><span class=err>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;exclude-file&#34;</span><span class=err>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;{{ .ConfigDir }}/root-excludes&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;{{ .ConfigDir }}/excludes&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span><span class=err>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;exclude-caches&#34;</span><span class=err>:</span> <span class=kc>true</span><span class=err>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;tag&#34;</span><span class=err>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;root&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span><span class=err>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;source&#34;</span><span class=err>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;/&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span><span class=err>,</span>
</span></span><span class=line><span class=cl><span class=p>{</span><span class=err>{</span> <span class=err>end</span> <span class=p>}</span><span class=err>}</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;version&#34;</span><span class=p>:</span> <span class=s2>&#34;1&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;global&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;priority&#34;</span><span class=p>:</span> <span class=s2>&#34;low&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;ionice&#34;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;ionice-class&#34;</span><span class=p>:</span> <span class=mi>2</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;ionice-level&#34;</span><span class=p>:</span> <span class=mi>6</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;base&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;status-file&#34;</span><span class=p>:</span> <span class=s2>&#34;{{ .Env.HOME }}/status.json&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;snapshots&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;host&#34;</span><span class=p>:</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;retention&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;host&#34;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;after-backup&#34;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;keep-within&#34;</span><span class=p>:</span> <span class=s2>&#34;30d&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;nas&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;inherit&#34;</span><span class=p>:</span> <span class=s2>&#34;base&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;repository&#34;</span><span class=p>:</span> <span class=s2>&#34;rest:http://{{ .Env.BACKUP_REST_USER }}:{{ .Env.BACKUP_REST_PASSWORD }}@nas:8000/root&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;password-file&#34;</span><span class=p>:</span> <span class=s2>&#34;nas-key&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;nas-root&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;inherit&#34;</span><span class=p>:</span> <span class=s2>&#34;nas&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;backup&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=err>{{</span> <span class=err>template</span> <span class=nt>&#34;backup_root&#34;</span> <span class=err>.</span> <span class=p>}}</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;schedule&#34;</span><span class=p>:</span> <span class=s2>&#34;01:47&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;schedule-permission&#34;</span><span class=p>:</span> <span class=s2>&#34;system&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;schedule-log&#34;</span><span class=p>:</span> <span class=s2>&#34;{{ .Profile.Name }}-backup.log&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=err>},</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;azure&#34;</span><span class=err>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;inherit&#34;</span><span class=p>:</span> <span class=s2>&#34;base&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;repository&#34;</span><span class=p>:</span> <span class=s2>&#34;azure:restic:/&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;password-file&#34;</span><span class=p>:</span> <span class=s2>&#34;azure-key&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;lock&#34;</span><span class=p>:</span> <span class=s2>&#34;/tmp/resticprofile-azure.lock&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;backup&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;schedule-permission&#34;</span><span class=p>:</span> <span class=s2>&#34;system&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;schedule-log&#34;</span><span class=p>:</span> <span class=s2>&#34;{{ .Profile.Name }}-backup.log&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span><span class=err>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;azure-root&#34;</span><span class=err>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;inherit&#34;</span><span class=p>:</span> <span class=s2>&#34;azure&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;backup&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=err>{{</span> <span class=err>template</span> <span class=nt>&#34;backup_root&#34;</span> <span class=err>.</span> <span class=p>}}</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;schedule&#34;</span><span class=err>:</span> <span class=s2>&#34;03:58&#34;</span>
</span></span><span class=line><span class=cl>    <span class=err>}</span>
</span></span><span class=line><span class=cl>  <span class=err>},</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;azure-mysql&#34;</span><span class=err>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;inherit&#34;</span><span class=p>:</span> <span class=s2>&#34;azure&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;backup&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;tag&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;mysql&#34;</span>
</span></span><span class=line><span class=cl>      <span class=p>],</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;run-before&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;rm -f /tmp/mysqldumpall.sql&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;mysqldump -u{{ .Env.MYSQL_BACKUP_USER }} -p{{ .Env.MYSQL_BACKUP_PASSWORD }} --all-databases &gt; /tmp/mysqldumpall.sql&#34;</span>
</span></span><span class=line><span class=cl>      <span class=p>],</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;source&#34;</span><span class=p>:</span> <span class=s2>&#34;/tmp/mysqldumpall.sql&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;run-after&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;rm -f /tmp/mysqldumpall.sql&#34;</span>
</span></span><span class=line><span class=cl>      <span class=p>],</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;schedule&#34;</span><span class=p>:</span> <span class=s2>&#34;03:18&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=err>}</span></span></span></code></pre></div></div></div></div></div><h2 id=debugging-your-template-and-variable-expansion>Debugging your template and variable expansion</h2><p>If for some reason you don&rsquo;t understand why resticprofile is not loading your configuration file, you can display the generated configuration after executing the template (and replacing the variables and everything) using the <code>--trace</code> flag. We will see it in action in a moment.</p><h2 id=limitations-of-using-templates>Limitations of using templates</h2><p>There&rsquo;s something to be aware of when dealing with templates: at the time the template is compiled, it has no knowledge of what the end configuration should look like: it has no knowledge of profiles for example. Here is a <strong>non-working</strong> example of what I mean:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-toml data-lang=toml><span class=line><span class=cl><span class=nx>version</span> <span class=p>=</span> <span class=s2>&#34;1&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>{{</span> <span class=nx>define</span> <span class=s2>&#34;retention&#34;</span> <span class=p>}}</span>
</span></span><span class=line><span class=cl>  <span class=p>[{{</span> <span class=p>.</span><span class=nx>Profile</span><span class=p>.</span><span class=nx>Name</span> <span class=p>}}.</span><span class=nx>retention</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=nx>after-backup</span> <span class=p>=</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>    <span class=nx>before-backup</span> <span class=p>=</span> <span class=kc>false</span>
</span></span><span class=line><span class=cl>    <span class=nx>compact</span> <span class=p>=</span> <span class=kc>false</span>
</span></span><span class=line><span class=cl>    <span class=nx>keep-within</span> <span class=p>=</span> <span class=s2>&#34;30d&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nx>prune</span> <span class=p>=</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl><span class=p>{{</span> <span class=nx>end</span> <span class=p>}}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=nx>src</span><span class=p>]</span>
</span></span><span class=line><span class=cl>  <span class=nx>password-file</span> <span class=p>=</span> <span class=s2>&#34;{{ .ConfigDir }}/{{ .Profile.Name }}-key&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nx>repository</span> <span class=p>=</span> <span class=s2>&#34;/backup/{{ .Now.Weekday }}&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nx>lock</span> <span class=p>=</span> <span class=s2>&#34;$HOME/resticprofile-profile-{{ .Profile.Name }}.lock&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nx>initialize</span> <span class=p>=</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=p>[</span><span class=nx>src</span><span class=p>.</span><span class=nx>backup</span><span class=p>]</span>
</span></span><span class=line><span class=cl>      <span class=nx>source</span> <span class=p>=</span> <span class=s2>&#34;{{ .Env.HOME }}/go/src&#34;</span>
</span></span><span class=line><span class=cl>      <span class=nx>check-before</span> <span class=p>=</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>      <span class=nx>exclude</span> <span class=p>=</span> <span class=p>[</span><span class=s2>&#34;/**/.git&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>      <span class=nx>exclude-caches</span> <span class=p>=</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>      <span class=nx>tag</span> <span class=p>=</span> <span class=p>[</span><span class=s2>&#34;{{ .Profile.Name }}&#34;</span><span class=p>,</span> <span class=s2>&#34;dev&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=p>{{</span> <span class=nx>template</span> <span class=s2>&#34;retention&#34;</span> <span class=p>.</span> <span class=p>}}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=p>[</span><span class=nx>src</span><span class=p>.</span><span class=nx>snapshots</span><span class=p>]</span>
</span></span><span class=line><span class=cl>      <span class=nx>tag</span> <span class=p>=</span> <span class=p>[</span><span class=s2>&#34;{{ .Profile.Name }}&#34;</span><span class=p>,</span> <span class=s2>&#34;dev&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=nx>other</span><span class=p>]</span>
</span></span><span class=line><span class=cl>  <span class=nx>password-file</span> <span class=p>=</span> <span class=s2>&#34;{{ .ConfigDir }}/{{ .Profile.Name }}-key&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nx>repository</span> <span class=p>=</span> <span class=s2>&#34;/backup/{{ .Now.Weekday }}&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nx>lock</span> <span class=p>=</span> <span class=s2>&#34;$HOME/resticprofile-profile-{{ .Profile.Name }}.lock&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nx>initialize</span> <span class=p>=</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=p>{{</span> <span class=nx>template</span> <span class=s2>&#34;retention&#34;</span> <span class=p>.</span> <span class=p>}}</span></span></span></code></pre></div><p>Here we define a template <code>retention</code> that we use twice.
When you ask for a configuration of a profile, either <code>src</code> or <code>other</code> the template will change all occurrences of <code>{ .Profile.Name }</code> to the name of the profile, no matter where it is inside the file.</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>% resticprofile -c examples/parse-error.toml -n src show
</span></span><span class=line><span class=cl>2020/11/06 21:39:48 cannot load configuration file: cannot parse toml configuration: While parsing config: <span class=o>(</span>35, 6<span class=o>)</span>: duplicated tables
</span></span><span class=line><span class=cl><span class=nb>exit</span> status <span class=m>1</span></span></span></code></pre></div><p>Run the command again, this time asking a display of the compiled version of the configuration:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>% resticprofile -c examples/parse-error.toml -n src --trace show
</span></span><span class=line><span class=cl>2020/11/06 21:48:20 resticprofile 0.10.0-dev compiled with go1.15.3
</span></span><span class=line><span class=cl>2020/11/06 21:48:20 Resulting configuration <span class=k>for</span> profile <span class=s1>&#39;default&#39;</span>:
</span></span><span class=line><span class=cl><span class=o>====================</span>
</span></span><span class=line><span class=cl>  1:
</span></span><span class=line><span class=cl>  2:
</span></span><span class=line><span class=cl>  3: <span class=o>[</span>src<span class=o>]</span>
</span></span><span class=line><span class=cl>  4: password-file <span class=o>=</span> <span class=s2>&#34;/Users/CP/go/src/resticprofile/examples/default-key&#34;</span>
</span></span><span class=line><span class=cl>  5: <span class=nv>repository</span> <span class=o>=</span> <span class=s2>&#34;/backup/Friday&#34;</span>
</span></span><span class=line><span class=cl>  6: <span class=nv>lock</span> <span class=o>=</span> <span class=s2>&#34;</span><span class=nv>$HOME</span><span class=s2>/resticprofile-profile-default.lock&#34;</span>
</span></span><span class=line><span class=cl>  7: <span class=nv>initialize</span> <span class=o>=</span> <span class=nb>true</span>
</span></span><span class=line><span class=cl>  8:
</span></span><span class=line><span class=cl>  9:     <span class=o>[</span>src.backup<span class=o>]</span>
</span></span><span class=line><span class=cl> 10:     <span class=nb>source</span> <span class=o>=</span> <span class=s2>&#34;/Users/CP/go/src&#34;</span>
</span></span><span class=line><span class=cl> 11:     check-before <span class=o>=</span> <span class=nb>true</span>
</span></span><span class=line><span class=cl> 12:     <span class=nv>exclude</span> <span class=o>=</span> <span class=o>[</span><span class=s2>&#34;/**/.git&#34;</span><span class=o>]</span>
</span></span><span class=line><span class=cl> 13:     exclude-caches <span class=o>=</span> <span class=nb>true</span>
</span></span><span class=line><span class=cl> 14:     <span class=nv>tag</span> <span class=o>=</span> <span class=o>[</span><span class=s2>&#34;default&#34;</span>, <span class=s2>&#34;dev&#34;</span><span class=o>]</span>
</span></span><span class=line><span class=cl> 15:
</span></span><span class=line><span class=cl> 16:
</span></span><span class=line><span class=cl> 17:     <span class=o>[</span>default.retention<span class=o>]</span>
</span></span><span class=line><span class=cl> 18:     after-backup <span class=o>=</span> <span class=nb>true</span>
</span></span><span class=line><span class=cl> 19:     before-backup <span class=o>=</span> <span class=nb>false</span>
</span></span><span class=line><span class=cl> 20:     <span class=nv>compact</span> <span class=o>=</span> <span class=nb>false</span>
</span></span><span class=line><span class=cl> 21:     keep-within <span class=o>=</span> <span class=s2>&#34;30d&#34;</span>
</span></span><span class=line><span class=cl> 22:     <span class=nv>prune</span> <span class=o>=</span> <span class=nb>true</span>
</span></span><span class=line><span class=cl> 23:
</span></span><span class=line><span class=cl> 24:
</span></span><span class=line><span class=cl> 25:     <span class=o>[</span>src.snapshots<span class=o>]</span>
</span></span><span class=line><span class=cl> 26:     <span class=nv>tag</span> <span class=o>=</span> <span class=o>[</span><span class=s2>&#34;default&#34;</span>, <span class=s2>&#34;dev&#34;</span><span class=o>]</span>
</span></span><span class=line><span class=cl> 27:
</span></span><span class=line><span class=cl> 28: <span class=o>[</span>other<span class=o>]</span>
</span></span><span class=line><span class=cl> 29: password-file <span class=o>=</span> <span class=s2>&#34;/Users/CP/go/src/resticprofile/examples/default-key&#34;</span>
</span></span><span class=line><span class=cl> 30: <span class=nv>repository</span> <span class=o>=</span> <span class=s2>&#34;/backup/Friday&#34;</span>
</span></span><span class=line><span class=cl> 31: <span class=nv>lock</span> <span class=o>=</span> <span class=s2>&#34;</span><span class=nv>$HOME</span><span class=s2>/resticprofile-profile-default.lock&#34;</span>
</span></span><span class=line><span class=cl> 32: <span class=nv>initialize</span> <span class=o>=</span> <span class=nb>true</span>
</span></span><span class=line><span class=cl> 33:
</span></span><span class=line><span class=cl> 34:
</span></span><span class=line><span class=cl> 35:     <span class=o>[</span>default.retention<span class=o>]</span>
</span></span><span class=line><span class=cl> 36:     after-backup <span class=o>=</span> <span class=nb>true</span>
</span></span><span class=line><span class=cl> 37:     before-backup <span class=o>=</span> <span class=nb>false</span>
</span></span><span class=line><span class=cl> 38:     <span class=nv>compact</span> <span class=o>=</span> <span class=nb>false</span>
</span></span><span class=line><span class=cl> 39:     keep-within <span class=o>=</span> <span class=s2>&#34;30d&#34;</span>
</span></span><span class=line><span class=cl> 40:     <span class=nv>prune</span> <span class=o>=</span> <span class=nb>true</span>
</span></span><span class=line><span class=cl> 41:
</span></span><span class=line><span class=cl> 42:
</span></span><span class=line><span class=cl><span class=o>====================</span>
</span></span><span class=line><span class=cl>2020/11/06 21:48:20 cannot load configuration file: cannot parse toml configuration: While parsing config: <span class=o>(</span>35, 6<span class=o>)</span>: duplicated tables
</span></span><span class=line><span class=cl><span class=nb>exit</span> status <span class=m>1</span></span></span></code></pre></div><p>As you can see in lines 17 and 35, there are 2 sections of the same name. They could be both called <code>[src.retention]</code>, but actually the reason why they&rsquo;re both called <code>[default.retention]</code> is that resticprofile is doing a first pass to load the <code>[global]</code> section using a profile name of <code>default</code>.</p><p>The fix for this configuration is very simple though, just remove the section name from the template:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-toml data-lang=toml><span class=line><span class=cl><span class=p>{{</span> <span class=nx>define</span> <span class=s2>&#34;retention&#34;</span> <span class=p>}}</span>
</span></span><span class=line><span class=cl>    <span class=nx>after-backup</span> <span class=p>=</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>    <span class=nx>before-backup</span> <span class=p>=</span> <span class=kc>false</span>
</span></span><span class=line><span class=cl>    <span class=nx>compact</span> <span class=p>=</span> <span class=kc>false</span>
</span></span><span class=line><span class=cl>    <span class=nx>keep-within</span> <span class=p>=</span> <span class=s2>&#34;30d&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nx>prune</span> <span class=p>=</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl><span class=p>{{</span> <span class=nx>end</span> <span class=p>}}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>version</span> <span class=p>=</span> <span class=s2>&#34;1&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=nx>src</span><span class=p>]</span>
</span></span><span class=line><span class=cl>  <span class=nx>password-file</span> <span class=p>=</span> <span class=s2>&#34;{{ .ConfigDir }}/{{ .Profile.Name }}-key&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nx>repository</span> <span class=p>=</span> <span class=s2>&#34;/backup/{{ .Now.Weekday }}&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nx>lock</span> <span class=p>=</span> <span class=s2>&#34;$HOME/resticprofile-profile-{{ .Profile.Name }}.lock&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nx>initialize</span> <span class=p>=</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=p>[</span><span class=nx>src</span><span class=p>.</span><span class=nx>backup</span><span class=p>]</span>
</span></span><span class=line><span class=cl>      <span class=nx>source</span> <span class=p>=</span> <span class=s2>&#34;{{ .Env.HOME }}/go/src&#34;</span>
</span></span><span class=line><span class=cl>      <span class=nx>check-before</span> <span class=p>=</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>      <span class=nx>exclude</span> <span class=p>=</span> <span class=p>[</span><span class=s2>&#34;/**/.git&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>      <span class=nx>exclude-caches</span> <span class=p>=</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>      <span class=nx>tag</span> <span class=p>=</span> <span class=p>[</span><span class=s2>&#34;{{ .Profile.Name }}&#34;</span><span class=p>,</span> <span class=s2>&#34;dev&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=p>[</span><span class=nx>src</span><span class=p>.</span><span class=nx>retention</span><span class=p>]</span>
</span></span><span class=line><span class=cl>      <span class=p>{{</span> <span class=nx>template</span> <span class=s2>&#34;retention&#34;</span> <span class=p>.</span> <span class=p>}}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=p>[</span><span class=nx>src</span><span class=p>.</span><span class=nx>snapshots</span><span class=p>]</span>
</span></span><span class=line><span class=cl>      <span class=nx>tag</span> <span class=p>=</span> <span class=p>[</span><span class=s2>&#34;{{ .Profile.Name }}&#34;</span><span class=p>,</span> <span class=s2>&#34;dev&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=nx>other</span><span class=p>]</span>
</span></span><span class=line><span class=cl>  <span class=nx>password-file</span> <span class=p>=</span> <span class=s2>&#34;{{ .ConfigDir }}/{{ .Profile.Name }}-key&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nx>repository</span> <span class=p>=</span> <span class=s2>&#34;/backup/{{ .Now.Weekday }}&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nx>lock</span> <span class=p>=</span> <span class=s2>&#34;$HOME/resticprofile-profile-{{ .Profile.Name }}.lock&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nx>initialize</span> <span class=p>=</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=p>[</span><span class=nx>other</span><span class=p>.</span><span class=nx>retention</span><span class=p>]</span>
</span></span><span class=line><span class=cl>      <span class=p>{{</span> <span class=nx>template</span> <span class=s2>&#34;retention&#34;</span> <span class=p>.</span> <span class=p>}}</span></span></span></code></pre></div><p>And now you no longer end up with duplicated sections.</p><h2 id=documentation-on-template-variable-expansion-and-other-configuration-scripting>Documentation on template, variable expansion and other configuration scripting</h2><p>There are a lot more you can do with configuration templates. If you&rsquo;re brave enough, <a href=https://golang.org/pkg/text/template/ rel=external target=_blank>you can read the full documentation of the Go templates</a>.</p><p>For a more end-user kind of documentation, you can also read <a href=https://gohugo.io/templates/introduction/ rel=external target=_blank>hugo documentation on templates</a> which is using the same Go implementation, but don&rsquo;t talk much about the developer side of it.
Please note there are some functions only made available by hugo though, resticprofile adds its own set of functions.</p><h2 id=template-functions>Template functions</h2><p>resticprofile supports the following set of own functions in all templates:</p><ul><li><code>{{ "some string" | contains "some" }}</code> => <code>true</code></li><li><code>{{ "some string" | matches "^.+str.+$" }}</code> => <code>true</code></li><li><code>{{ "some old string" | replace "old" "new" }}</code> => <code>some new string</code></li><li><code>{{ "some old string" | replaceR "(old)" "$1 and new" }}</code> => <code>some old and new string</code></li><li><code>{{ "some old string" | regex "(old)" "$1 and new" }}</code> => <code>some old and new string</code>
(<code>regex</code> is an alias to <code>replaceR</code>)</li><li><code>{{ "ABC" | lower }}</code> => <code>abc</code></li><li><code>{{ "abc" | upper }}</code> => <code>ABC</code></li><li><code>{{ " A " | trim }}</code> => <code>A</code></li><li><code>{{ "--A-" | trimPrefix "--" }}</code> => <code>A-</code></li><li><code>{{ "--A-" | trimSuffix "-" }}</code> => <code>--A</code></li><li><code>{{ range $v := "A,B,C" | split "," }} ({{ $v }}) {{ end }}</code> => <code>(A) (B) (C)</code></li><li><code>{{ "A,B,C" | split "," | join ";" }}</code> => <code>A;B;C</code></li><li><code>{{ "A, B, C" | splitR "\\s*,\\s*" | join ";" }}</code> => <code>A;B;C</code></li><li><code>{{ range $v := list "A" "B" "C" }} ({{ $v }}) {{ end }}</code> => <code>(A) (B) (C)</code></li><li><code>{{ with map "k1" "v1" "k2" "v2" }} {{ .k1 }}-{{ .k2 }} {{ end }}</code> => <code>v1-v2</code></li><li><code>{{ with list "A" "B" "C" "D" | map }} {{ ._0 }}-{{ ._1 }}-{{ ._3 }} {{ end }}</code> => <code>A-B-D</code></li><li><code>{{ with list "A" "B" "C" "D" | map "key" }} {{ .key | join "-" }} {{ end }}</code> => <code>A-B-C-D</code></li><li><code>{{ tempDir }}</code> => <code>/tmp/resticprofile.../t</code> - unique OS specific existing temporary directory</li><li><code>{{ tempFile "filename" }}</code> => <code>/tmp/resticprofile.../t/filename</code> - unique OS specific existing temporary file</li><li><code>{{ env }}</code> => <code>/tmp/resticprofile.../t/profile.env</code> - unique OS specific existing temporary file that is added to the current profile env-files list</li></ul><p>All <code>{{ temp* }}</code> functions guarantee that returned temporary directories and files are existing & writable.
When resticprofile ends, temporary directories and files are removed.</p><p>The <code>{{ env }}</code> function is a special case of <code>{{ tempFile ... }}</code> returning a path to a file in dotenv file format that can be used in <a href=https://creativeprojects.github.io/resticprofile/configuration/run_hooks/index.html>shell commands</a> to alter the environment.
On posix compatible file systems, the file is accessible only by the user that started resticprofile. Further it is automatically added to the <code>env-file</code> list of the current profile.</p><p>The following functions can be used to encode data (e.g. when dealing with arbitrary input):</p><ul><li><code>{{ "a & b\n" | js }}</code> => <code>a \u0026 b\u000A</code> - JSON string equivalent of the input (<em>builtin</em>)</li><li><code>{{ "a & b\n" | html }}</code> => <code>a &amp;amp; b\n</code> - HTML text escaped input (<em>builtin</em>)</li><li><code>{{ "a & b\n" | urlquery }}</code> => <code>a+%26+b%0A</code> - URL query escaped input (<em>builtin</em>)</li><li><code>{{ "plain" | base64 }}</code> => <code>cGxhaW4=</code> - Base64 encoded input</li><li><code>{{ "plain" | hex }}</code> => <code>706c61696e</code> - Hexadecimal encoded input</li></ul><details open class="box cstyle notices tip"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>Encode with <code>js</code> when creating <strong>strings</strong> in <em>YAML</em>, <em>TOML</em> or <em>JSON</em> configuration files, e.g.: <code>"{{ .Env.MY_VAR | js }}"</code>.
This ensures the markup remains correct and can be parsed regardless of the input data.</p></div></details><p>Please refer to the <a href=https://golang.org/pkg/text/template/ rel=external target=_blank>official documentation</a> for the general syntax and set of default functions provided in go text templates.</p><footer class=footline></footer></article></div></main></div><aside id=R-sidebar class=default-animation><div id=R-header-topbar class=default-animation></div><div id=R-header-wrapper class=default-animation><div id=R-header class=default-animation><style>a#R-logo{display:flex;align-items:center;transition:opacity .3s ease}a#R-logo img{max-width:min(40%,100px);height:auto;margin-right:10px}@media(max-width:768px){a#R-logo img{max-width:30%}}a#R-logo span{display:flex;flex-direction:column;color:inherit;text-decoration:none}a#R-logo .restic{font-weight:700}</style><a id=R-logo class=R-default href=https://creativeprojects.github.io/resticprofile/index.html><img src=https://creativeprojects.github.io/resticprofile/images/logo.png alt="ResticProfile Logo">
<span><span class=restic>Restic</span>
<span class=profile>Profile</span></span></a></div><search><form action=https://creativeprojects.github.io/resticprofile/search/index.html method=get><div class="searchbox default-animation"><button class=search-detail type=submit title="Search (CTRL+ALT+f)"><i class="fas fa-search"></i></button>
<label class=a11y-only for=R-search-by>Search</label>
<input data-search-input id=R-search-by name=search-by class=search-by type=search placeholder=Search...>
<button class=search-clear type=button data-search-clear title="Clear search"><i class="fas fa-times" title="Clear search"></i></button></div></form></search></div><div id=R-homelinks class="default-animation homelinks"><div class="R-menu-divider default-animation"><hr class=padding></div><div class="R-sidebarmenu R-shortcutmenu-homelinks"><ul class="space collapsible-menu"><li data-nav-id=/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/index.html><i class="fa-fw fas fa-home"></i> Home</a></li></ul></div><div class="R-menu-divider default-animation"><hr class=padding></div><div class="R-sidebarmenu R-shortcutmenu-headercontrols"><ul></ul></div><div class="R-menu-divider default-animation"><hr class=padding></div></div><div id=R-content-wrapper class=highlightable><div class="R-sidebarmenu R-shortcutmenu-home"><ul class="enlarge morespace collapsible-menu"><li data-nav-id=/installation/index.html><input type=checkbox id=R-section-ff749ccaab053548f690f97bcd6daed0 aria-controls=R-subsections-ff749ccaab053548f690f97bcd6daed0><label for=R-section-ff749ccaab053548f690f97bcd6daed0><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Installation</span></label><a class=padding href=https://creativeprojects.github.io/resticprofile/installation/index.html><b>1. </b>Installation</a><ul id=R-subsections-ff749ccaab053548f690f97bcd6daed0 class=collapsible-menu><li data-nav-id=/installation/binaries/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/installation/binaries/index.html>Pre-built binaries</a></li><li data-nav-id=/installation/linux/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/installation/linux/index.html>Linux</a></li><li data-nav-id=/installation/macosx/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/installation/macosx/index.html>mac OS</a></li><li data-nav-id=/installation/windows/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/installation/windows/index.html>Windows</a></li><li data-nav-id=/installation/ansible/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/installation/ansible/index.html>Ansible</a></li><li data-nav-id=/installation/source/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/installation/source/index.html>Source</a></li><li data-nav-id=/installation/upgrade/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/installation/upgrade/index.html>Upgrade</a></li><li data-nav-id=/installation/docker/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/installation/docker/index.html>Docker</a></li><li data-nav-id=/installation/shell/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/installation/shell/index.html>Shell Completion</a></li></ul></li><li class=parent data-nav-id=/configuration/index.html><input type=checkbox id=R-section-6f6dce359ca8d596b5b1de1969a0aca2 aria-controls=R-subsections-6f6dce359ca8d596b5b1de1969a0aca2 checked><label for=R-section-6f6dce359ca8d596b5b1de1969a0aca2><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Configuration file</span></label><a class=padding href=https://creativeprojects.github.io/resticprofile/configuration/index.html><b>2. </b>Configuration file</a><ul id=R-subsections-6f6dce359ca8d596b5b1de1969a0aca2 class=collapsible-menu><li data-nav-id=/configuration/getting_started/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/configuration/getting_started/index.html>Getting Started</a></li><li data-nav-id=/configuration/examples/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/configuration/examples/index.html>Examples</a></li><li data-nav-id=/configuration/path/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/configuration/path/index.html>Path</a></li><li data-nav-id=/configuration/include/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/configuration/include/index.html>Includes</a></li><li data-nav-id=/configuration/inheritance/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/configuration/inheritance/index.html>Inheritance</a></li><li data-nav-id=/configuration/copy/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/configuration/copy/index.html>Copy command</a></li><li data-nav-id=/configuration/run_hooks/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/configuration/run_hooks/index.html>Command Hooks</a></li><li data-nav-id=/configuration/http_hooks/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/configuration/http_hooks/index.html>HTTP Hooks</a></li><li class=active data-nav-id=/configuration/templates/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/configuration/templates/index.html>Templates</a></li><li data-nav-id=/configuration/variables/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/configuration/variables/index.html>Variables</a></li><li data-nav-id=/configuration/warnings/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/configuration/warnings/index.html>Warnings</a></li><li data-nav-id=/configuration/priority/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/configuration/priority/index.html>Priority</a></li><li data-nav-id=/configuration/sleep/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/configuration/sleep/index.html>Preventing system sleep</a></li><li data-nav-id=/configuration/logs/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/configuration/logs/index.html>Logs</a></li><li data-nav-id=/configuration/jsonschema/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/configuration/jsonschema/index.html>JSON schema</a></li><li data-nav-id=/configuration/v2/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/configuration/v2/index.html>Configuration v2 proposal</a></li></ul></li><li data-nav-id=/usage/index.html><input type=checkbox id=R-section-62f9042a23780ab51a3b699210e86d03 aria-controls=R-subsections-62f9042a23780ab51a3b699210e86d03><label for=R-section-62f9042a23780ab51a3b699210e86d03><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Using resticprofile</span></label><a class=padding href=https://creativeprojects.github.io/resticprofile/usage/index.html><b>3. </b>Using resticprofile</a><ul id=R-subsections-62f9042a23780ab51a3b699210e86d03 class=collapsible-menu><li data-nav-id=/usage/version/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/usage/version/index.html>Version</a></li><li data-nav-id=/usage/keyfile/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/usage/keyfile/index.html>Generate a Keyfile</a></li><li data-nav-id=/usage/memory/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/usage/memory/index.html>Memory</a></li><li data-nav-id=/usage/locks/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/usage/locks/index.html>Locks</a></li></ul></li><li data-nav-id=/schedules/index.html><input type=checkbox id=R-section-5d098b05363f64ff2ba3671d78edad9c aria-controls=R-subsections-5d098b05363f64ff2ba3671d78edad9c><label for=R-section-5d098b05363f64ff2ba3671d78edad9c><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Schedules</span></label><a class=padding href=https://creativeprojects.github.io/resticprofile/schedules/index.html><b>4. </b>Schedules</a><ul id=R-subsections-5d098b05363f64ff2ba3671d78edad9c class=collapsible-menu><li data-nav-id=/schedules/configuration/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/schedules/configuration/index.html>Schedule Configuration</a></li><li data-nav-id=/schedules/commands/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/schedules/commands/index.html>Schedule Commands</a></li><li data-nav-id=/schedules/examples/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/schedules/examples/index.html>Schedule Examples</a></li><li data-nav-id=/schedules/systemd/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/schedules/systemd/index.html>Systemd</a></li><li data-nav-id=/schedules/launchd/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/schedules/launchd/index.html>Launchd on macOS</a></li><li data-nav-id=/schedules/task_scheduler/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/schedules/task_scheduler/index.html>Windows Task Scheduler</a></li><li data-nav-id=/schedules/cron/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/schedules/cron/index.html>Cron & compatible</a></li><li data-nav-id=/schedules/non-root-schedule-in-container/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/schedules/non-root-schedule-in-container/index.html>User schedule in container</a></li></ul></li><li data-nav-id=/monitoring/index.html><input type=checkbox id=R-section-a0e069e6fac7784c30d45b70837f6ac6 aria-controls=R-subsections-a0e069e6fac7784c30d45b70837f6ac6><label for=R-section-a0e069e6fac7784c30d45b70837f6ac6><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Monitoring</span></label><a class=padding href=https://creativeprojects.github.io/resticprofile/monitoring/index.html><b>5. </b>Monitoring</a><ul id=R-subsections-a0e069e6fac7784c30d45b70837f6ac6 class=collapsible-menu><li data-nav-id=/monitoring/status/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/monitoring/status/index.html>Status file</a></li><li data-nav-id=/monitoring/prometheus/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/monitoring/prometheus/index.html>Prometheus</a></li></ul></li><li data-nav-id=/reference/index.html><input type=checkbox id=R-section-66002f201bef818664bb81aa67490c58 aria-controls=R-subsections-66002f201bef818664bb81aa67490c58><label for=R-section-66002f201bef818664bb81aa67490c58><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Reference</span></label><a class=padding href=https://creativeprojects.github.io/resticprofile/reference/index.html><b>6. </b>Reference</a><ul id=R-subsections-66002f201bef818664bb81aa67490c58 class=collapsible-menu><li data-nav-id=/reference/global/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/reference/global/index.html>Section global</a></li><li data-nav-id=/reference/profile/index.html><input type=checkbox id=R-section-2b27328718862c5708b95d5e4972db36 aria-controls=R-subsections-2b27328718862c5708b95d5e4972db36><label for=R-section-2b27328718862c5708b95d5e4972db36><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Section Profile</span></label><a class=padding href=https://creativeprojects.github.io/resticprofile/reference/profile/index.html>Section Profile</a><ul id=R-subsections-2b27328718862c5708b95d5e4972db36 class=collapsible-menu><li data-nav-id=/reference/profile/backup/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/reference/profile/backup/index.html>backup</a></li><li data-nav-id=/reference/profile/cache/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/reference/profile/cache/index.html>cache</a></li><li data-nav-id=/reference/profile/cat/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/reference/profile/cat/index.html>cat</a></li><li data-nav-id=/reference/profile/check/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/reference/profile/check/index.html>check</a></li><li data-nav-id=/reference/profile/copy/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/reference/profile/copy/index.html>copy</a></li><li data-nav-id=/reference/profile/diff/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/reference/profile/diff/index.html>diff</a></li><li data-nav-id=/reference/profile/dump/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/reference/profile/dump/index.html>dump</a></li><li data-nav-id=/reference/profile/features/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/reference/profile/features/index.html>features</a></li><li data-nav-id=/reference/profile/find/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/reference/profile/find/index.html>find</a></li><li data-nav-id=/reference/profile/forget/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/reference/profile/forget/index.html>forget</a></li><li data-nav-id=/reference/profile/init/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/reference/profile/init/index.html>init</a></li><li data-nav-id=/reference/profile/key/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/reference/profile/key/index.html>key</a></li><li data-nav-id=/reference/profile/key-add/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/reference/profile/key-add/index.html>key-add</a></li><li data-nav-id=/reference/profile/key-list/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/reference/profile/key-list/index.html>key-list</a></li><li data-nav-id=/reference/profile/key-passwd/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/reference/profile/key-passwd/index.html>key-passwd</a></li><li data-nav-id=/reference/profile/key-remove/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/reference/profile/key-remove/index.html>key-remove</a></li><li data-nav-id=/reference/profile/list/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/reference/profile/list/index.html>list</a></li><li data-nav-id=/reference/profile/ls/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/reference/profile/ls/index.html>ls</a></li><li data-nav-id=/reference/profile/migrate/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/reference/profile/migrate/index.html>migrate</a></li><li data-nav-id=/reference/profile/mount/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/reference/profile/mount/index.html>mount</a></li><li data-nav-id=/reference/profile/options/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/reference/profile/options/index.html>options</a></li><li data-nav-id=/reference/profile/prune/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/reference/profile/prune/index.html>prune</a></li><li data-nav-id=/reference/profile/rebuild-index/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/reference/profile/rebuild-index/index.html>rebuild-index</a></li><li data-nav-id=/reference/profile/recover/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/reference/profile/recover/index.html>recover</a></li><li data-nav-id=/reference/profile/repair/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/reference/profile/repair/index.html>repair</a></li><li data-nav-id=/reference/profile/repair-index/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/reference/profile/repair-index/index.html>repair-index</a></li><li data-nav-id=/reference/profile/repair-packs/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/reference/profile/repair-packs/index.html>repair-packs</a></li><li data-nav-id=/reference/profile/repair-snapshots/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/reference/profile/repair-snapshots/index.html>repair-snapshots</a></li><li data-nav-id=/reference/profile/restore/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/reference/profile/restore/index.html>restore</a></li><li data-nav-id=/reference/profile/retention/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/reference/profile/retention/index.html>retention</a></li><li data-nav-id=/reference/profile/rewrite/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/reference/profile/rewrite/index.html>rewrite</a></li><li data-nav-id=/reference/profile/snapshots/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/reference/profile/snapshots/index.html>snapshots</a></li><li data-nav-id=/reference/profile/stats/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/reference/profile/stats/index.html>stats</a></li><li data-nav-id=/reference/profile/tag/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/reference/profile/tag/index.html>tag</a></li><li data-nav-id=/reference/profile/unlock/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/reference/profile/unlock/index.html>unlock</a></li></ul></li><li data-nav-id=/reference/nested/index.html><input type=checkbox id=R-section-8e740c11fa05d6c23f17ed19569e00ae aria-controls=R-subsections-8e740c11fa05d6c23f17ed19569e00ae><label for=R-section-8e740c11fa05d6c23f17ed19569e00ae><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Nested Sections</span></label><a class=padding href=https://creativeprojects.github.io/resticprofile/reference/nested/index.html>Nested Sections</a><ul id=R-subsections-8e740c11fa05d6c23f17ed19569e00ae class=collapsible-menu><li data-nav-id=/reference/nested/schedulebaseconfig/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/reference/nested/schedulebaseconfig/index.html>ScheduleBaseConfig</a></li><li data-nav-id=/reference/nested/scheduleconfig/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/reference/nested/scheduleconfig/index.html>ScheduleConfig</a></li><li data-nav-id=/reference/nested/sendmonitoringheader/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/reference/nested/sendmonitoringheader/index.html>SendMonitoringHeader</a></li><li data-nav-id=/reference/nested/sendmonitoringsection/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/reference/nested/sendmonitoringsection/index.html>SendMonitoringSection</a></li><li data-nav-id=/reference/nested/streamerrorsection/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/reference/nested/streamerrorsection/index.html>StreamErrorSection</a></li></ul></li><li data-nav-id=/reference/groups/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/reference/groups/index.html>Section Groups</a></li><li data-nav-id=/reference/value-types/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/reference/value-types/index.html>Value types</a></li><li data-nav-id=/reference/json-schema/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/reference/json-schema/index.html>JSON Schema</a></li></ul></li><li data-nav-id=/contributions/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/contributions/index.html><b>7. </b>Contributions</a></li><li data-nav-id=/changelog/index.html><a class=padding href=https://creativeprojects.github.io/resticprofile/changelog/index.html><b>8. </b>Release Notes</a></li></ul></div><div class="R-sidebarmenu R-shortcutmenu-version"><ul class="space collapsible-menu"></ul></div><div class="R-sidebarmenu R-shortcutmenu-shortcuts"><div class="nav-title padding">More</div><ul class="space collapsible-menu"><li data-nav-id=/tags><a class=padding href=https://creativeprojects.github.io/resticprofile/tags><i class='fas fa-tags'></i> Tags</a></li><li data-nav-id=https://github.com/creativeprojects/resticprofile/><a class=padding href=https://github.com/creativeprojects/resticprofile/ rel=external target=_blank><i class='fab fa-fw fa-github'></i> GitHub repo</a></li><li data-nav-id=https://restic.readthedocs.io/><a class=padding href=https://restic.readthedocs.io/ rel=external target=_blank><i class='fas fa-fw fa-bookmark'></i> Restic Documentation</a></li></ul></div><div id=R-footer-margin></div><div class="R-menu-divider default-animation"><hr class=padding></div><div class="R-sidebarmenu R-shortcutmenu-footercontrols"><ul><li class=R-variantswitcher><div class="padding menu-control"><i class="fa-fw fas fa-paint-brush"></i>
<span>&nbsp;</span><div class=control-style><label class=a11y-only for=R-select-variant>Theme</label>
<select id=R-select-variant><option id=R-select-variant-relearn-auto value=relearn-auto selected>Relearn Light/Dark</option><option id=R-select-variant-relearn-light value=relearn-light>Relearn Light</option><option id=R-select-variant-relearn-dark value=relearn-dark>Relearn Dark</option></select></div><div class=clear></div></div><script>window.relearn.markVariant()</script></li></ul></div><div id=R-footer><a class=github-button href=https://github.com/creativeprojects/resticprofile data-color-scheme="no-preference: light; light: light; dark: dark_dimmed;" data-size=large data-show-count=true aria-label="Star creativeprojects/resticprofile on GitHub">Star</a><p>Built with <a href=https://github.com/McShelby/hugo-theme-relearn title=love><i class="fas fa-heart"></i></a> by <a href=https://gohugo.io/>Hugo</a></p><script async defer src=https://buttons.github.io/buttons.js></script></div></div></aside><script src=https://creativeprojects.github.io/resticprofile/js/clipboard/clipboard.min.js?1748261438 defer></script><script src=https://creativeprojects.github.io/resticprofile/js/perfect-scrollbar/perfect-scrollbar.min.js?1748261438 defer></script><script src=https://creativeprojects.github.io/resticprofile/js/theme.min.js?1748261438 defer></script></body></html>