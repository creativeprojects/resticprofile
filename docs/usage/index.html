<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.98.0" />
    <meta name="generator" content="Relearn 3.4.1&#43;tip">
    <meta name="description" content="">
    <title>Usage :: resticprofile</title>
    <link rel="alternate" type="application/rss&#43;xml" href="https://creativeprojects.github.io/resticprofile/usage/index.xml" title="resticprofile" />
    <link href="https://creativeprojects.github.io/resticprofile/css/nucleus.css?1652734609" rel="stylesheet">
    <link href="https://creativeprojects.github.io/resticprofile/css/fontawesome-all.min.css?1652734609" rel="stylesheet">
    <link href="https://creativeprojects.github.io/resticprofile/css/featherlight.min.css?1652734609" rel="stylesheet">
    <link href="https://creativeprojects.github.io/resticprofile/css/perfect-scrollbar.min.css?1652734609" rel="stylesheet">
    <link href="https://creativeprojects.github.io/resticprofile/css/auto-complete.css?1652734609" rel="stylesheet">
    <link href="https://creativeprojects.github.io/resticprofile/css/theme.css?1652734609" rel="stylesheet">
    <link href="https://creativeprojects.github.io/resticprofile/css/theme-relearn-light.css?1652734609" rel="stylesheet" id="variant-style">
    <link href="https://creativeprojects.github.io/resticprofile/css/variant.css?1652734609" rel="stylesheet">
    <link href="https://creativeprojects.github.io/resticprofile/css/print.css?1652734609" rel="stylesheet" media="print">
    <script src="https://creativeprojects.github.io/resticprofile/js/variant.js?1652734609"></script>
    <script>
      // hack to let hugo tell us how to get to the root when using relativeURLs, it needs to be called *url= for it to do its magic:
      // https://github.com/gohugoio/hugo/blob/145b3fcce35fbac25c7033c91c1b7ae6d1179da8/transform/urlreplacers/absurlreplacer.go#L72
      var index_url="https://creativeprojects.github.io/resticprofile/index.json";
      var root_url="https://creativeprojects.github.io/resticprofile/";
      var baseUri=root_url.replace(/\/$/, '');
      // translations
      window.T_Copy_to_clipboard = 'Copy to clipboard';
      window.T_Copied_to_clipboard = 'Copied to clipboard!';
      window.T_Copy_link_to_clipboard = 'Copy link to clipboard';
      window.T_Link_copied_to_clipboard = 'Copied link to clipboard!';
      // some further base stuff
      var baseUriFull='https:\/\/creativeprojects.github.io\/resticprofile/';
      variants.init( [ 'relearn-light', 'relearn-dark' ] );
    </script>
    <script src="https://creativeprojects.github.io/resticprofile/js/jquery.min.js?1652734609"></script>
  </head>
  <body class="mobile-support" data-url="https://creativeprojects.github.io/resticprofile/usage/">
    <div id="body" class="default-animation">
      <div id="sidebar-overlay"></div>
      <div id="toc-overlay"></div>
      <nav id="topbar" class="highlightable">
        <div>
          <div class="navigation">
             <a class="nav nav-next" href="https://creativeprojects.github.io/resticprofile/usage/version/" title="Version"><i class="fas fa-chevron-right fa-fw"></i></a>
          </div>
          <div class="navigation">
             <a class="nav nav-prev" href="https://creativeprojects.github.io/resticprofile/configuration/reference/" title="Reference"><i class="fas fa-chevron-left fa-fw"></i></a>
          </div>
          <div id="breadcrumbs">
            <span id="sidebar-toggle-span">
              <a href="#" id="sidebar-toggle" title='Menu'><i class="fas fa-bars fa-fw"></i></a>
            </span>
            <ol class="links" itemscope itemtype="http://schema.org/BreadcrumbList">
              <meta itemprop="itemListOrder" content="Descending" />
              <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><meta itemprop="position" content="2" /><a itemprop="item" href="https://creativeprojects.github.io/resticprofile/"><span itemprop="name">resticprofile</span></a> > </li>
              <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><meta itemprop="position" content="1" /><a itemprop="item" href="https://creativeprojects.github.io/resticprofile/usage/" aria-disabled="true"><span itemprop="name">Usage</span></a></li>
            </ol>
          </div>
        </div>
      </nav>
      <main id="body-inner" class="highlightable chapter">
        <div class="flex-block-wrapper">
          <div id="head-tags">
          </div>
          <article class="chapter">

<h1 id="using-resticprofile">Using resticprofile</h1>
<p>Here are a few examples how to run resticprofile (using the main example configuration file)</p>
<p>See all snapshots of your <code>[default]</code> profile:</p>
<pre tabindex="0"><code>$ resticprofile
</code></pre><p>See all available profiles in your configuration file (and the restic commands where some flags are defined):</p>
<pre tabindex="0"><code>$ resticprofile profiles

Profiles available:
  stdin:     (backup)
  default:   (env)
  root:      (retention, backup)
  src:       (retention, backup)
  linux:     (retention, backup, snapshots, env)
  no-cache:  (n/a)

Groups available:
  full-backup:  root, src
</code></pre><p>Backup root &amp; src profiles (using <em>full-backup</em> group shown earlier)</p>
<pre tabindex="0"><code>$ resticprofile --name &#34;full-backup&#34; backup
</code></pre><p>or</p>
<pre tabindex="0"><code>$ resticprofile full-backup.backup
</code></pre><p>Assuming the <em>stdin</em> profile from the configuration file shown before, the command to send a mysqldump to the backup is as simple as:</p>
<pre tabindex="0"><code>$ mysqldump --all-databases --order-by-primary | resticprofile --name stdin backup
</code></pre><p>or</p>
<pre tabindex="0"><code>$ mysqldump --all-databases --order-by-primary | resticprofile stdin.backup
</code></pre><p>or when resticprofile runs &ldquo;mysqldump&rdquo; (can be scheduled):</p>
<pre tabindex="0"><code>$ resticprofile mysql.backup
</code></pre><p>Mount the default profile (<em>default</em>) in /mnt/restic:</p>
<pre tabindex="0"><code>$ resticprofile mount /mnt/restic
</code></pre><p>Display quick help</p>
<pre tabindex="0"><code>$ resticprofile --help

Usage of resticprofile:
	resticprofile [resticprofile flags] [profile name.][restic command] [restic flags]
	resticprofile [resticprofile flags] [profile name.][resticprofile command] [command specific flags]

resticprofile flags:
  -c, --config string        configuration file (default &#34;profiles&#34;)
      --dry-run              display the restic commands instead of running them
  -f, --format string        file format of the configuration (default is to use the file extension)
  -h, --help                 display this help
      --lock-wait duration   wait up to duration to acquire a lock (syntax &#34;1h5m30s&#34;)
  -l, --log string           logs into a file instead of the console
  -n, --name string          profile name (default &#34;default&#34;)
      --no-ansi              disable ansi control characters (disable console colouring)
      --no-lock              skip profile lock file
      --no-prio              don&#39;t set any priority on load: used when started from a service that has already set the priority
  -q, --quiet                display only warnings and errors
      --theme string         console colouring theme (dark, light, none) (default &#34;light&#34;)
      --trace                display even more debugging information
  -v, --verbose              display some debugging information
  -w, --wait                 wait at the end until the user presses the enter key

resticprofile own commands:
   version       display version (run in verbose mode for detailed information)
   self-update   update to latest resticprofile (use -q/--quiet flag to update without confirmation)
   profiles      display profile names from the configuration file
   show          show all the details of the current profile
   random-key    generate a cryptographically secure random key to use as a restic keyfile
   schedule      schedule jobs from a profile (use --all flag to schedule all jobs of all profiles)
   unschedule    remove scheduled jobs of a profile (use --all flag to unschedule all profiles)
   status        display the status of scheduled jobs (use --all flag for all profiles)
</code></pre><p>A command is either a restic command or a resticprofile own command.</p>
<h2 id="command-line-reference">Command line reference</h2>
<p>There are not many options on the command line, most of the options are in the configuration file.</p>
<ul>
<li><strong>[-h]</strong>: Display quick help</li>
<li><strong>[-c | &ndash;config] configuration_file</strong>: Specify a configuration file other than the default</li>
<li><strong>[-f | &ndash;format] configuration_format</strong>: Specify the configuration file format: <code>toml</code>, <code>yaml</code>, <code>json</code> or <code>hcl</code></li>
<li><strong>[-n | &ndash;name] profile_name</strong>: Profile section to use from the configuration file.
You can also use <code>[profile_name].[command]</code> syntax instead, this will only work if <code>-n</code> is not set.
Using <code>-n [profile_name] [command]</code> or <code>[profile_name].[command]</code> both select profile and command and are technically equivalent.</li>
<li><strong>[&ndash;dry-run]</strong>: Doesn&rsquo;t run the restic command but display the command line instead</li>
<li><strong>[-q | &ndash;quiet]</strong>: Force resticprofile and restic to be quiet (override any configuration from the profile)</li>
<li><strong>[-v | &ndash;verbose]</strong>: Force resticprofile and restic to be verbose (override any configuration from the profile)</li>
<li><strong>[&ndash;no-ansi]</strong>: Disable console colouring (to save output into a log file)</li>
<li><strong>[&ndash;no-lock]</strong>: Disable resticprofile locks, neither create nor fail on a lock. restic locks are unaffected by this option.</li>
<li><strong>[&ndash;theme]</strong>: Can be <code>light</code>, <code>dark</code> or <code>none</code>. The colours will adjust to a
light or dark terminal (none to disable colouring)</li>
<li><strong>[&ndash;lock-wait] duration</strong>: Retry to acquire resticprofile and restic locks for up to the specified amount of time before failing on a lock failure.</li>
<li><strong>[-l | &ndash;log] log_file</strong>: To write the logs in file instead of displaying on the console</li>
<li><strong>[-w | &ndash;wait]</strong>: Wait at the very end of the execution for the user to press enter. This is only useful in Windows when resticprofile is started from explorer and the console window closes automatically at the end.</li>
<li><strong>[resticprofile OR restic command]</strong>: Like snapshots, backup, check, prune, forget, mount, etc.</li>
<li><strong>[additional flags]</strong>: Any additional flags to pass to the restic command line</li>
</ul>

            <footer class="footline">
            </footer>
          </article>
        </div>
      </main>
    </div>
    <aside id="sidebar" class="default-animation">
      <div id="header-wrapper" class="default-animation">
        <div id="header" class="default-animation">
<style>
    a#logo {
      color: #282828;
      color: var(--MENU-SECTIONS-BG-color);
      font-family: 'Work Sans', 'Helvetica', 'Tahoma', 'Geneva', 'Arial', sans-serif;
      font-size: 30px;
      font-weight: 300;
      margin-top: -13px;
      max-width: 60%;
      text-transform: uppercase;
      width: 226px;
      white-space: nowrap;
    }
    a#logo:hover {
      color: #282828;
      color: var(--MENU-SECTIONS-BG-color);
    }
    @media only all and (max-width: 59.938em) {
      a#logo {
        font-size: 25px;
        margin-top: -3px;
      }
    }
  </style>
  <a id="logo" href="https://creativeprojects.github.io/resticprofile/">
    Resticprofile</a>

        </div>
        <div class="searchbox default-animation">
          <label for="search-by"><i class="fas fa-search"></i></label>
          <input data-search-input id="search-by" type="search" placeholder="Search...">
          <span data-search-clear=""><i class="fas fa-times"></i></span>
        </div>
        <script src="https://creativeprojects.github.io/resticprofile/js/lunr.min.js?1652734609"></script>
        <script src="https://creativeprojects.github.io/resticprofile/js/auto-complete.js?1652734609"></script>
        <script src="https://creativeprojects.github.io/resticprofile/js/search.js?1652734609"></script>
      </div>
      <div id="homelinks" class="default-animation">
        <ul>
          <li>
              <a class="padding" href="https://creativeprojects.github.io/resticprofile/"><i class="fas fa-home"></i> Home</a>
          </li>
        </ul>
      </div>
      <div id="content-wrapper" class="highlightable">
        <ul class="topics collapsible-menu">
          <li data-nav-id="/installation/" title="Installation" class="dd-item"><input type="checkbox" id="section-07cca5796d23f5bae96340e1eaa52bc5" class="toggle"/><label for="section-07cca5796d23f5bae96340e1eaa52bc5" ></label><a href="https://creativeprojects.github.io/resticprofile/installation/"><b>1. </b>Installation</a><ul>
          <li data-nav-id="/installation/linux/" title="Linux" class="dd-item"><a href="https://creativeprojects.github.io/resticprofile/installation/linux/">Linux</a></li>
          <li data-nav-id="/installation/macosx/" title="mac OS X" class="dd-item"><a href="https://creativeprojects.github.io/resticprofile/installation/macosx/">mac OS X</a></li>
          <li data-nav-id="/installation/windows/" title="Windows" class="dd-item"><a href="https://creativeprojects.github.io/resticprofile/installation/windows/">Windows</a></li>
          <li data-nav-id="/installation/ansible/" title="Ansible" class="dd-item"><a href="https://creativeprojects.github.io/resticprofile/installation/ansible/">Ansible</a></li>
          <li data-nav-id="/installation/source/" title="Source" class="dd-item"><a href="https://creativeprojects.github.io/resticprofile/installation/source/">Source</a></li>
          <li data-nav-id="/installation/upgrade/" title="Upgrade" class="dd-item"><a href="https://creativeprojects.github.io/resticprofile/installation/upgrade/">Upgrade</a></li>
          <li data-nav-id="/installation/docker/" title="Docker" class="dd-item"><a href="https://creativeprojects.github.io/resticprofile/installation/docker/">Docker</a></li>
          <li data-nav-id="/installation/shell/" title="Shell Completion" class="dd-item"><a href="https://creativeprojects.github.io/resticprofile/installation/shell/">Shell Completion</a></li></ul></li>
          <li data-nav-id="/configuration/" title="Configuration" class="dd-item"><input type="checkbox" id="section-632bb56b075027697eb90eb7e3d29a12" class="toggle"/><label for="section-632bb56b075027697eb90eb7e3d29a12" ></label><a href="https://creativeprojects.github.io/resticprofile/configuration/"><b>2. </b>Configuration</a><ul>
          <li data-nav-id="/configuration/examples/" title="Examples" class="dd-item"><a href="https://creativeprojects.github.io/resticprofile/configuration/examples/">Examples</a></li>
          <li data-nav-id="/configuration/path/" title="Path" class="dd-item"><a href="https://creativeprojects.github.io/resticprofile/configuration/path/">Path</a></li>
          <li data-nav-id="/configuration/include/" title="Include" class="dd-item"><a href="https://creativeprojects.github.io/resticprofile/configuration/include/">Include</a></li>
          <li data-nav-id="/configuration/hooks/" title="Hooks" class="dd-item"><a href="https://creativeprojects.github.io/resticprofile/configuration/hooks/">Hooks</a></li>
          <li data-nav-id="/configuration/variables/" title="Variables" class="dd-item"><a href="https://creativeprojects.github.io/resticprofile/configuration/variables/">Variables</a></li>
          <li data-nav-id="/configuration/templates/" title="Configuration templates" class="dd-item"><a href="https://creativeprojects.github.io/resticprofile/configuration/templates/">Configuration templates</a></li>
          <li data-nav-id="/configuration/warnings/" title="Warnings" class="dd-item"><a href="https://creativeprojects.github.io/resticprofile/configuration/warnings/">Warnings</a></li>
          <li data-nav-id="/configuration/reference/" title="Reference" class="dd-item"><a href="https://creativeprojects.github.io/resticprofile/configuration/reference/">Reference</a></li></ul></li>
          <li data-nav-id="/usage/" title="Usage" class="dd-item active parent"><input type="checkbox" id="section-03639a5661feed360d88d7c5ddbc54ac" class="toggle" checked/><label for="section-03639a5661feed360d88d7c5ddbc54ac" ></label><a href="https://creativeprojects.github.io/resticprofile/usage/"><b>3. </b>Usage</a><ul>
          <li data-nav-id="/usage/version/" title="Version" class="dd-item"><a href="https://creativeprojects.github.io/resticprofile/usage/version/">Version</a></li>
          <li data-nav-id="/usage/keyfile/" title="Keyfile" class="dd-item"><a href="https://creativeprojects.github.io/resticprofile/usage/keyfile/">Keyfile</a></li>
          <li data-nav-id="/usage/memory/" title="Memory" class="dd-item"><a href="https://creativeprojects.github.io/resticprofile/usage/memory/">Memory</a></li>
          <li data-nav-id="/usage/locks/" title="Locks" class="dd-item"><a href="https://creativeprojects.github.io/resticprofile/usage/locks/">Locks</a></li></ul></li>
          <li data-nav-id="/schedules/" title="Schedules" class="dd-item"><input type="checkbox" id="section-87baf7cbc6382c50c9c5ba4cd8fe677c" class="toggle"/><label for="section-87baf7cbc6382c50c9c5ba4cd8fe677c" ></label><a href="https://creativeprojects.github.io/resticprofile/schedules/"><b>4. </b>Schedules</a><ul>
          <li data-nav-id="/schedules/systemd/" title="Systemd" class="dd-item"><a href="https://creativeprojects.github.io/resticprofile/schedules/systemd/">Systemd</a></li>
          <li data-nav-id="/schedules/launchd/" title="Launchd" class="dd-item"><a href="https://creativeprojects.github.io/resticprofile/schedules/launchd/">Launchd</a></li></ul></li>
          <li data-nav-id="/status/" title="Status" class="dd-item"><input type="checkbox" id="section-b59a464d04a72be2d6c2f9673b1d306d" class="toggle"/><label for="section-b59a464d04a72be2d6c2f9673b1d306d" ></label><a href="https://creativeprojects.github.io/resticprofile/status/"><b>5. </b>Status</a><ul>
          <li data-nav-id="/status/prometheus/" title="Prometheus" class="dd-item"><a href="https://creativeprojects.github.io/resticprofile/status/prometheus/">Prometheus</a></li></ul></li>
          <li data-nav-id="/contributions/" title="Contributions" class="dd-item"><a href="https://creativeprojects.github.io/resticprofile/contributions/"><b>6. </b>Contributions</a></li>
        </ul>
        <div class="footermargin footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showVariantSwitch showFooter"></div>
        <hr class="default-animation footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showVariantSwitch showFooter"/>
        <div id="prefooter" class="footerLangSwitch footerVariantSwitch footerVisitedLinks showVariantSwitch">
          <ul>
            <li id="select-language-container" class="footerLangSwitch">
              <a class="padding select-container">
                <i class="fas fa-language fa-fw"></i>
                <span>&nbsp;</span>
                <div class="select-style">
                  <select id="select-language" onchange="location = baseUri + this.value;">
                  </select>
                </div>
                <div class="select-clear"></div>
              </a>
            </li>
            <li id="select-variant-container" class="footerVariantSwitch showVariantSwitch">
              <a class="padding select-container">
                <i class="fas fa-paint-brush fa-fw"></i>
                <span>&nbsp;</span>
                <div class="select-style">
                  <select id="select-variant" onchange="variants.changeVariant( this.value );">
                    <option id="relearn-light" value="relearn-light" selected>Relearn Light</option>
                    <option id="relearn-dark" value="relearn-dark">Relearn Dark</option>
                  </select>
                </div>
                <div class="select-clear"></div>
              </a>
              <script>variants.markSelectedVariant();</script>
            </li>
            <li class="footerVisitedLinks"><a class="padding" href="#" data-clear-history-toggle=""><i class="fas fa-history fa-fw"></i> Clear History</a></li>
          </ul>
        </div>
        <div id="footer" class="footerFooter showFooter"><style>
    #footer {
      font-size: 13px;
      height: 100px;
      margin-left: auto;
      margin-right: auto;
      padding: 2rem 1rem;
      text-align: center;
      min-width: 230px;
      max-width: 300px;
    }
    #footer p {
      margin: 0;
    }
  </style>


<a class="github-button" href="https://github.com/creativeprojects/resticprofile" data-size="large" data-show-count="true" aria-label="Star creativeprojects/resticprofile on GitHub">Star</a>

<p>Built with <a href="https://github.com/McShelby/hugo-theme-relearn"><i class="fas fa-heart"></i></a> by <a href="https://gohugo.io/">Hugo</a></p>

<script async defer src="https://buttons.github.io/buttons.js"></script>

        </div>
      </div>
    </aside>
    <script src="https://creativeprojects.github.io/resticprofile/js/clipboard.min.js?1652734609"></script>
    <script src="https://creativeprojects.github.io/resticprofile/js/perfect-scrollbar.min.js?1652734609"></script>
    <script src="https://creativeprojects.github.io/resticprofile/js/featherlight.min.js?1652734609"></script>
    <script src="https://creativeprojects.github.io/resticprofile/js/theme.js?1652734609"></script>
  </body>
</html>
